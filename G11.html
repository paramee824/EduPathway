<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß ‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡πÑ‡∏ó‡∏¢ - Railway Maintenance Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Kanit', sans-serif; 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #1e3c72 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        }
        
        .rail-track {
            background: repeating-linear-gradient(
                90deg,
                #8B4513 0px,
                #8B4513 15px,
                #A0522D 15px,
                #A0522D 30px
            );
            border: 4px solid #654321;
            position: relative;
            overflow: hidden;
        }
        
        .rail-track::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent 0px,
                transparent 8px,
                rgba(0,0,0,0.1) 8px,
                rgba(0,0,0,0.1) 10px
            );
        }
        
        .damage-indicator {
            position: absolute;
            animation: damage-pulse 1.5s ease-in-out infinite;
            filter: drop-shadow(0 0 10px currentColor);
        }
        
        @keyframes damage-pulse {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.2) rotate(5deg); opacity: 0.7; }
        }
        
        .repair-tool {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        .repair-tool:hover {
            transform: translateY(-5px) scale(1.1);
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.3));
            background: rgba(59, 130, 246, 0.2) !important;
            border: 2px solid #3b82f6;
        }
        
        .repair-tool.selected {
            animation: tool-selected 0.5s ease-in-out;
            border: 3px solid #fbbf24 !important;
            background: rgba(251, 191, 36, 0.3) !important;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
            transform: scale(1.05);
        }
        
        @keyframes tool-selected {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progress-shine 2s linear infinite;
        }
        
        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .weather-effect {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 10;
        }
        
        .rain-effect {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="rain" patternUnits="userSpaceOnUse" width="10" height="10"><line x1="5" y1="0" x2="3" y2="10" stroke="%23add8e6" stroke-width="0.5" opacity="0.6"/></pattern></defs><rect width="100" height="100" fill="url(%23rain)"/></svg>');
            animation: rain-fall 0.5s linear infinite;
        }
        
        @keyframes rain-fall {
            0% { background-position: 0 0; }
            100% { background-position: 0 20px; }
        }
        
        .spark-effect {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fbbf24;
            border-radius: 50%;
            animation: spark-fly 1s ease-out forwards;
        }
        
        @keyframes spark-fly {
            0% { 
                transform: scale(1) translate(0, 0);
                opacity: 1;
            }
            100% { 
                transform: scale(0) translate(var(--spark-x, 20px), var(--spark-y, -20px));
                opacity: 0;
            }
        }
        
        .repair-animation {
            animation: repair-work 2s ease-in-out;
        }
        
        @keyframes repair-work {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
        
        .level-up-effect {
            animation: level-celebration 3s ease-out;
            transform-origin: center;
        }
        
        @keyframes level-celebration {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.3) rotate(10deg); }
            50% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.2) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .notification {
            animation: notification-slide 0.5s ease-out;
        }
        
        @keyframes notification-slide {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .tool-inventory {
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
            border: 2px solid #6b7280;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .damage-type-critical {
            background: radial-gradient(circle, #dc2626, #991b1b);
            animation: critical-alert 1s ease-in-out infinite alternate;
        }
        
        @keyframes critical-alert {
            0% { box-shadow: 0 0 10px #dc2626; }
            100% { box-shadow: 0 0 30px #dc2626, 0 0 50px #dc2626; }
        }
        
        .damage-type-major {
            background: radial-gradient(circle, #f59e0b, #d97706);
            animation: major-warning 2s ease-in-out infinite;
        }
        
        @keyframes major-warning {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .damage-type-minor {
            background: radial-gradient(circle, #eab308, #ca8a04);
        }
        
        .repair-success {
            animation: repair-complete 1s ease-out;
        }
        
        @keyframes repair-complete {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.8; }
            100% { transform: scale(0); opacity: 0; }
        }
        
        .money-popup {
            animation: money-earn 2s ease-out forwards;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes money-earn {
            0% { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateY(-30px) scale(1.2);
                opacity: 1;
            }
            100% { 
                transform: translateY(-60px) scale(0.8);
                opacity: 0;
            }
        }
        
        .experience-bar {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
            position: relative;
            overflow: hidden;
        }
        
        .experience-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: exp-glow 3s ease-in-out infinite;
        }
        
        @keyframes exp-glow {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }
        
        .weather-indicator {
            animation: weather-change 4s ease-in-out infinite;
        }
        
        @keyframes weather-change {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(360deg); }
        }
        
        .emergency-alert {
            background: linear-gradient(45deg, #dc2626, #991b1b, #dc2626);
            background-size: 200% 200%;
            animation: emergency-flash 0.5s ease-in-out infinite alternate;
        }
        
        @keyframes emergency-flash {
            0% { 
                background-position: 0% 50%;
                box-shadow: 0 0 20px #dc2626;
            }
            100% { 
                background-position: 100% 50%;
                box-shadow: 0 0 40px #dc2626, 0 0 60px #dc2626;
            }
        }
        
        .achievement-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border: 3px solid #d97706;
            animation: badge-shine 3s ease-in-out infinite;
        }
        
        @keyframes badge-shine {
            0%, 100% { transform: scale(1); filter: brightness(1); }
            50% { transform: scale(1.05); filter: brightness(1.2); }
        }
        
        .mini-game-container {
            background: linear-gradient(135deg, #1f2937, #374151);
            border: 2px solid #4b5563;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .wire-connection {
            stroke-dasharray: 5, 5;
            animation: wire-flow 1s linear infinite;
        }
        
        @keyframes wire-flow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: 10; }
        }
        
        .safety-warning {
            background: repeating-linear-gradient(
                45deg,
                #fbbf24,
                #fbbf24 10px,
                #000 10px,
                #000 20px
            );
            animation: safety-blink 1s ease-in-out infinite;
        }
        
        @keyframes safety-blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .holographic-ui {
            background: linear-gradient(135deg, 
                rgba(59, 130, 246, 0.1) 0%, 
                rgba(147, 51, 234, 0.1) 50%, 
                rgba(59, 130, 246, 0.1) 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .diagnostic-screen {
            background: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 5px #00ff00;
            animation: screen-flicker 0.1s linear infinite;
        }
        
        @keyframes screen-flicker {
            0%, 98% { opacity: 1; }
            99% { opacity: 0.98; }
            100% { opacity: 1; }
        }
        
        .repair-zone {
            border: 3px dashed #3b82f6;
            background: rgba(59, 130, 246, 0.1);
            animation: zone-pulse 2s ease-in-out infinite;
        }
        
        @keyframes zone-pulse {
            0%, 100% { border-color: #3b82f6; background: rgba(59, 130, 246, 0.1); }
            50% { border-color: #1d4ed8; background: rgba(29, 78, 216, 0.2); }
        }
        
        .quality-meter {
            background: conic-gradient(
                from 0deg,
                #dc2626 0deg 60deg,
                #f59e0b 60deg 120deg,
                #eab308 120deg 180deg,
                #84cc16 180deg 240deg,
                #10b981 240deg 300deg,
                #059669 300deg 360deg
            );
            border-radius: 50%;
            position: relative;
        }
        
        .quality-needle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: bottom center;
            transition: transform 0.5s ease-out;
            z-index: 10;
        }
        
        .particle-effect {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fbbf24;
            border-radius: 50%;
            animation: particle-float 3s ease-out infinite;
        }
        
        @keyframes particle-float {
            0% { 
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translate(var(--random-x, 50px), var(--random-y, -100px)) scale(0);
                opacity: 0;
            }
        }
        
        @keyframes star-burst {
            0% { 
                transform: translate(-50%, -50%) rotate(var(--angle)) translateX(0) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translate(-50%, -50%) rotate(var(--angle)) translateX(60px) scale(0);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="min-h-screen p-2">
    <!-- ‡∏´‡∏±‡∏ß‡πÄ‡∏Å‡∏° -->
    <div class="text-center mb-4">
        <h1 class="text-5xl font-bold text-white mb-2 drop-shadow-lg">üîß ‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡πÑ‡∏ó‡∏¢</h1>
        <p class="text-2xl text-blue-100 drop-shadow">Railway Maintenance Simulator - Professional Edition</p>
        <div class="mt-2 text-lg text-yellow-200">
            ‚ö° ‡∏£‡∏∞‡∏ö‡∏ö‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á | üõ†Ô∏è ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô | üèÜ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        </div>
    </div>

    <!-- ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏´‡∏•‡∏±‡∏Å -->
    <div class="max-w-7xl mx-auto">
        <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å -->
        <div class="game-container rounded-2xl p-6 mb-6">
            <div class="grid grid-cols-2 md:grid-cols-6 gap-4 mb-4">
                <div class="text-center holographic-ui rounded-xl p-4">
                    <div class="text-sm text-gray-600 mb-1">üí∞ ‡πÄ‡∏á‡∏¥‡∏ô</div>
                    <div class="text-2xl font-bold text-green-600" id="money">5,000 ‡∏ø</div>
                </div>
                <div class="text-center holographic-ui rounded-xl p-4">
                    <div class="text-sm text-gray-600 mb-1">‚≠ê ‡∏£‡∏∞‡∏î‡∏±‡∏ö</div>
                    <div class="text-2xl font-bold text-blue-600" id="level">1</div>
                </div>
                <div class="text-center holographic-ui rounded-xl p-4">
                    <div class="text-sm text-gray-600 mb-1">üèÜ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                    <div class="text-2xl font-bold text-purple-600" id="score">0</div>
                </div>
                <div class="text-center holographic-ui rounded-xl p-4">
                    <div class="text-sm text-gray-600 mb-1">üîß ‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°</div>
                    <div class="text-2xl font-bold text-orange-600" id="repairs-completed">0</div>
                </div>
                <div class="text-center holographic-ui rounded-xl p-4">
                    <div class="text-sm text-gray-600 mb-1">‚ö° ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô</div>
                    <div class="text-2xl font-bold text-yellow-600" id="energy">100%</div>
                </div>
                <div class="text-center holographic-ui rounded-xl p-4">
                    <div class="text-sm text-gray-600 mb-1">üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</div>
                    <div class="text-2xl font-bold text-red-600" id="temperature">32¬∞C</div>
                </div>
            </div>

            <!-- ‡πÅ‡∏ñ‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå -->
            <div class="mb-4">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-semibold text-gray-700">üìà ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå</span>
                    <span class="text-sm text-gray-600" id="exp-text">0 / 100 EXP</span>
                </div>
                <div class="w-full bg-gray-300 rounded-full h-4 overflow-hidden">
                    <div class="experience-bar h-full rounded-full transition-all duration-500" id="exp-bar" style="width: 0%"></div>
                </div>
            </div>

            <!-- ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ -->
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="weather-indicator text-3xl" id="weather-icon">‚òÄÔ∏è</div>
                    <div>
                        <div class="text-sm text-gray-600">‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
                        <div class="font-semibold text-gray-800" id="weather-status">‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-600">‡πÄ‡∏ß‡∏•‡∏≤</div>
                    <div class="font-semibold text-gray-800" id="game-time">08:00 ‡∏ô.</div>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-4 gap-6">
            <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°‡∏´‡∏•‡∏±‡∏Å -->
            <div class="lg:col-span-3">
                <div class="game-container rounded-2xl p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">üõ§Ô∏è ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü</h2>
                        <div class="flex space-x-2">
                            <button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors" id="scan-btn">
                                üîç ‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢
                            </button>
                            <button class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors" id="auto-repair-btn">
                                ü§ñ ‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                            </button>
                        </div>
                    </div>

                    <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü -->
                    <div class="rail-track rounded-xl p-6 mb-6 relative" style="height: 400px;" id="rail-area">
                        <div class="weather-effect" id="weather-effect"></div>
                        
                        <!-- ‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡∏´‡∏•‡∏±‡∏Å -->
                        <div class="absolute inset-6">
                            <!-- ‡∏£‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ -->
                            <div class="absolute top-1/3 left-0 right-0 h-3 bg-gray-600 rounded-full shadow-lg"></div>
                            <!-- ‡∏£‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤ -->
                            <div class="absolute top-2/3 left-0 right-0 h-3 bg-gray-600 rounded-full shadow-lg"></div>
                            
                            <!-- ‡∏´‡∏°‡∏≠‡∏ô‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô -->
                            <div class="absolute top-1/4 left-0 right-0 h-1 bg-gray-800" style="background: repeating-linear-gradient(90deg, #4b5563 0px, #4b5563 20px, transparent 20px, transparent 40px);"></div>
                            <div class="absolute top-3/4 left-0 right-0 h-1 bg-gray-800" style="background: repeating-linear-gradient(90deg, #4b5563 0px, #4b5563 20px, transparent 20px, transparent 40px);"></div>
                            
                            <!-- ‡∏´‡∏°‡∏≠‡∏ô‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á -->
                            <div class="absolute top-0 bottom-0 left-1/6 w-2 bg-amber-800 opacity-60"></div>
                            <div class="absolute top-0 bottom-0 left-2/6 w-2 bg-amber-800 opacity-60"></div>
                            <div class="absolute top-0 bottom-0 left-3/6 w-2 bg-amber-800 opacity-60"></div>
                            <div class="absolute top-0 bottom-0 left-4/6 w-2 bg-amber-800 opacity-60"></div>
                            <div class="absolute top-0 bottom-0 left-5/6 w-2 bg-amber-800 opacity-60"></div>
                            
                            <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ -->
                            <div id="damage-areas"></div>
                            
                            <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏° -->
                            <div class="repair-zone absolute inset-0 hidden" id="repair-zone">
                                <div class="text-center text-blue-600 font-bold mt-4">üîß ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°</div>
                            </div>
                        </div>
                        
                        <!-- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ -->
                        <div id="particle-container"></div>
                    </div>

                    <!-- ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏° -->
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="holographic-ui rounded-xl p-4">
                            <h3 class="font-bold text-gray-800 mb-3">üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏û‡∏ö:</span>
                                    <span class="font-bold text-red-600" id="damage-count">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß:</span>
                                    <span class="font-bold text-green-600" id="repaired-count">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏á‡∏≤‡∏ô:</span>
                                    <span class="font-bold text-blue-600" id="quality-score">100%</span>
                                </div>
                            </div>
                        </div>

                        <div class="holographic-ui rounded-xl p-4">
                            <h3 class="font-bold text-gray-800 mb-3">‚ö° ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:</span>
                                    <span class="font-bold text-green-600" id="safety-level">‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û:</span>
                                    <span class="font-bold text-blue-600" id="efficiency">95%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠:</span>
                                    <span class="font-bold text-yellow-600" id="tool-status">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                                </div>
                            </div>
                        </div>

                        <div class="holographic-ui rounded-xl p-4">
                            <h3 class="font-bold text-gray-800 mb-3">üèÜ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:</span>
                                    <span class="font-bold text-purple-600" id="daily-repairs">0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á:</span>
                                    <span class="font-bold text-orange-600" id="streak">0 ‡∏ß‡∏±‡∏ô</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö:</span>
                                    <span class="font-bold text-pink-600" id="rank">‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ‡∏°‡∏¥‡∏ô‡∏¥‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏° -->
                <div class="mini-game-container rounded-2xl p-6 hidden" id="mini-game-container">
                    <h3 class="text-xl font-bold text-white mb-4">üéÆ ‡∏°‡∏¥‡∏ô‡∏¥‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°</h3>
                    <div id="mini-game-content">
                        <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏°‡∏¥‡∏ô‡∏¥‡πÄ‡∏Å‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                    </div>
                </div>
            </div>

            <!-- ‡πÅ‡∏ú‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->
            <div class="space-y-6">
                <!-- ‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ -->
                <div class="game-container rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üß∞ ‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠</h3>
                    <div class="grid grid-cols-2 gap-2" id="tool-inventory">
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="hammer">
                            <div class="text-2xl mb-1">üî®</div>
                            <div class="text-xs font-semibold">‡∏Ñ‡πâ‡∏≠‡∏ô‡∏ó‡∏∏‡∏ö‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏£‡∏≠‡∏¢‡πÅ‡∏ï‡∏Å/‡∏ö‡∏¥‡πà‡∏ô</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="wrench">
                            <div class="text-2xl mb-1">üîß</div>
                            <div class="text-xs font-semibold">‡∏õ‡∏£‡∏∞‡πÅ‡∏à‡∏Ç‡∏±‡∏ô‡∏ô‡πá‡∏≠‡∏ï</div>
                            <div class="text-xs text-gray-600">‡∏ô‡πá‡∏≠‡∏ï‡∏´‡∏•‡∏ß‡∏°</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="welder">
                            <div class="text-2xl mb-1">‚ö°</div>
                            <div class="text-xs font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏£‡∏≤‡∏á‡∏´‡∏±‡∏Å</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="grinder">
                            <div class="text-2xl mb-1">‚öôÔ∏è</div>
                            <div class="text-xs font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏à‡∏µ‡∏¢‡∏£‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏™‡∏ô‡∏¥‡∏°/‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="drill">
                            <div class="text-2xl mb-1">ü™ö</div>
                            <div class="text-xs font-semibold">‡∏™‡∏ß‡πà‡∏≤‡∏ô‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏π‡πÉ‡∏´‡∏°‡πà</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="scanner">
                            <div class="text-2xl mb-1">üì°</div>
                            <div class="text-xs font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="railSaw">
                            <div class="text-2xl mb-1">ü™ö</div>
                            <div class="text-xs font-semibold">‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏¢‡∏ï‡∏±‡∏î‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏ï‡∏±‡∏î‡∏£‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="railLifter">
                            <div class="text-2xl mb-1">üèóÔ∏è</div>
                            <div class="text-xs font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏Å‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏¢‡∏Å‡∏£‡∏≤‡∏á</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="railBender">
                            <div class="text-2xl mb-1">üîÑ</div>
                            <div class="text-xs font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏±‡∏î‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏î‡∏±‡∏î‡∏£‡∏≤‡∏á‡∏ï‡∏£‡∏á</div>
                        </div>
                        <div class="repair-tool tool-inventory rounded-lg p-2 text-center cursor-pointer" data-tool="thermometer">
                            <div class="text-2xl mb-1">üå°Ô∏è</div>
                            <div class="text-xs font-semibold">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</div>
                            <div class="text-xs text-gray-600">‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-gray-100 rounded-lg">
                        <div class="text-sm font-semibold text-gray-700 mb-2">üîß ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</div>
                        <div class="text-lg font-bold text-blue-600" id="selected-tool">‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
                    </div>
                </div>

                <!-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢ -->
                <div class="game-container rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üîç ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢</h3>
                    <div class="diagnostic-screen rounded-lg p-4 mb-4" style="height: 150px; overflow-y: auto;" id="diagnostic-output">
                        <div>> ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô...</div>
                        <div>> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢...</div>
                        <div>> ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <button class="px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors" id="full-scan-btn">
                            üîç ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö
                        </button>
                        <button class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors" id="quick-scan-btn">
                            ‚ö° ‡∏™‡πÅ‡∏Å‡∏ô‡∏î‡πà‡∏ß‡∏ô
                        </button>
                        <button class="px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm transition-colors" id="deep-scan-btn">
                            üéØ ‡∏™‡πÅ‡∏Å‡∏ô‡∏•‡∏∂‡∏Å
                        </button>
                        <button class="px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded text-sm transition-colors" id="thermal-scan-btn">
                            üå°Ô∏è ‡∏™‡πÅ‡∏Å‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô
                        </button>
                    </div>
                </div>

                <!-- ‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û -->
                <div class="game-container rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üìä ‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û</h3>
                    <div class="flex justify-center mb-4">
                        <div class="quality-meter w-32 h-32 relative">
                            <div class="quality-needle w-1 h-16 bg-red-600 absolute" style="transform: translate(-50%, -100%) rotate(45deg);" id="quality-needle"></div>
                            <div class="absolute inset-4 bg-white rounded-full flex items-center justify-center">
                                <div class="text-center">
                                    <div class="text-xs text-gray-600">‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û</div>
                                    <div class="text-lg font-bold" id="quality-percentage">100%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥:</span>
                            <span class="font-bold text-green-600" id="accuracy">100%</span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß:</span>
                            <span class="font-bold text-blue-600" id="speed-rating">A+</span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:</span>
                            <span class="font-bold text-purple-600" id="safety-rating">‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°</span>
                        </div>
                    </div>
                </div>

                <!-- ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® -->
                <div class="game-container rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üõ°Ô∏è ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</h3>
                    <div class="space-y-2" id="weather-protection-items">
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">‚òÇÔ∏è ‡∏£‡πà‡∏°‡∏Å‡∏±‡∏ô‡∏ù‡∏ô</div>
                                <div class="text-xs text-gray-600">‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏ô +20% ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</div>
                            </div>
                            <button class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors" data-weather="rainy" data-price="800">
                                800 ‡∏ø
                            </button>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">üå™Ô∏è ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏±‡∏ô‡∏û‡∏≤‡∏¢‡∏∏</div>
                                <div class="text-xs text-gray-600">‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏û‡∏≤‡∏¢‡∏∏ +20% ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</div>
                            </div>
                            <button class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors" data-weather="stormy" data-price="1200">
                                1,200 ‡∏ø
                            </button>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">üï∂Ô∏è ‡πÅ‡∏ß‡πà‡∏ô‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á</div>
                                <div class="text-xs text-gray-600">‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î +20% ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</div>
                            </div>
                            <button class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors" data-weather="sunny" data-price="600">
                                600 ‡∏ø
                            </button>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">üå´Ô∏è ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å‡∏Å‡∏±‡∏ô‡∏´‡∏°‡∏≠‡∏Å</div>
                                <div class="text-xs text-gray-600">‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏°‡∏≠‡∏Å +20% ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</div>
                            </div>
                            <button class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors" data-weather="foggy" data-price="900">
                                900 ‡∏ø
                            </button>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">üß• ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡∏≤‡∏ß</div>
                                <div class="text-xs text-gray-600">‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô +20% ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</div>
                            </div>
                            <button class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors" data-weather="cold" data-price="1000">
                                1,000 ‡∏ø
                            </button>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">‚ùÑÔ∏è ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô</div>
                                <div class="text-xs text-gray-600">‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô +20% ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</div>
                            </div>
                            <button class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors" data-weather="hot" data-price="1500">
                                1,500 ‡∏ø
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î -->
                <div class="game-container rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üõí ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î</h3>
                    <div class="space-y-2" id="shop-items">
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">üî® ‡∏Ñ‡πâ‡∏≠‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤</div>
                                <div class="text-xs text-gray-600">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏ã‡πà‡∏≠‡∏° +50%</div>
                            </div>
                            <button class="px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs transition-colors" data-item="electric-hammer" data-price="2000">
                                2,000 ‡∏ø
                            </button>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">üîç ‡πÄ‡∏•‡∏ô‡∏™‡πå‡∏Ç‡∏¢‡∏≤‡∏¢</div>
                                <div class="text-xs text-gray-600">‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô</div>
                            </div>
                            <button class="px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs transition-colors" data-item="magnifier" data-price="1500">
                                1,500 ‡∏ø
                            </button>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-100 rounded">
                            <div>
                                <div class="font-semibold">‚ö° ‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                                <div class="text-xs text-gray-600">‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î</div>
                            </div>
                            <button class="px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs transition-colors" data-item="super-battery" data-price="5000">
                                5,000 ‡∏ø
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏Å‡∏° -->
                <div class="game-container rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üìñ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏Å‡∏°</h3>
                    <div class="space-y-2 max-h-48 overflow-y-auto" id="tutorial-guide">
                        <button class="w-full text-left p-2 bg-blue-50 hover:bg-blue-100 rounded border-l-4 border-blue-400 transition-colors" onclick="game.showTutorial('basic')">
                            <div class="font-semibold text-sm">üéØ ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</div>
                            <div class="text-xs text-gray-600">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°</div>
                        </button>
                        <button class="w-full text-left p-2 bg-green-50 hover:bg-green-100 rounded border-l-4 border-green-400 transition-colors" onclick="game.showTutorial('tools')">
                            <div class="font-semibold text-sm">üîß ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á</div>
                            <div class="text-xs text-gray-600">‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏ô‡∏¥‡∏î</div>
                        </button>
                        <button class="w-full text-left p-2 bg-yellow-50 hover:bg-yellow-100 rounded border-l-4 border-yellow-400 transition-colors" onclick="game.showTutorial('weather')">
                            <div class="font-semibold text-sm">üå¶Ô∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
                            <div class="text-xs text-gray-600">‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Ç‡∏≠‡∏á‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</div>
                        </button>
                        <button class="w-full text-left p-2 bg-purple-50 hover:bg-purple-100 rounded border-l-4 border-purple-400 transition-colors" onclick="game.showTutorial('damage')">
                            <div class="font-semibold text-sm">üí• ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</div>
                            <div class="text-xs text-gray-600">‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ï‡πà‡∏≤‡∏á‡πÜ</div>
                        </button>
                        <button class="w-full text-left p-2 bg-pink-50 hover:bg-pink-100 rounded border-l-4 border-pink-400 transition-colors" onclick="game.showTutorial('tips')">
                            <div class="font-semibold text-sm">üí° ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö</div>
                            <div class="text-xs text-gray-600">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô</div>
                        </button>
                    </div>
                </div>

                <!-- ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
                <div class="game-container rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">üì¢ ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
                    <div class="space-y-2 max-h-48 overflow-y-auto" id="news-feed">
                        <div class="notification text-sm p-2 bg-blue-50 rounded border-l-4 border-blue-400">
                            üéÆ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡πÑ‡∏ó‡∏¢!
                        </div>
                        <div class="notification text-sm p-2 bg-green-50 rounded border-l-4 border-green-400">
                            üí° ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢
                        </div>
                        <div class="notification text-sm p-2 bg-yellow-50 rounded border-l-4 border-yellow-400">
                            üîß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à -->
    <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="achievement-modal">
        <div class="game-container rounded-2xl p-8 max-w-md mx-4">
            <div class="text-center">
                <div class="achievement-badge w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center">
                    <div class="text-4xl" id="achievement-icon">üèÜ</div>
                </div>
                <h2 class="text-2xl font-bold text-gray-800 mb-2" id="achievement-title">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏´‡∏°‡πà!</h2>
                <p class="text-gray-600 mb-4" id="achievement-description">‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏´‡∏°‡πà</p>
                <div class="text-lg font-bold text-green-600 mb-4" id="achievement-reward">+500 ‡∏ø</div>
                <button class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition-colors" id="close-achievement">
                    ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
                </button>
            </div>
        </div>
    </div>

    <!-- Modal ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö -->
    <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="level-up-modal">
        <div class="game-container rounded-2xl p-8 max-w-md mx-4">
            <div class="text-center">
                <div class="text-6xl mb-4 level-up-effect">üéâ</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-2">‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö!</h2>
                <p class="text-xl text-blue-600 mb-4">‡∏£‡∏∞‡∏î‡∏±‡∏ö <span id="new-level">2</span></p>
                <div class="space-y-2 mb-4">
                    <p class="text-gray-600">‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:</p>
                    <div class="text-lg font-bold text-green-600">üí∞ +1,000 ‡∏ø</div>
                    <div class="text-lg font-bold text-blue-600">‚ö° ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏ï‡πá‡∏°</div>
                    <div class="text-lg font-bold text-purple-600">üîß ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà</div>
                </div>
                <button class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition-colors" id="close-level-up">
                    ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!
                </button>
            </div>
        </div>
    </div>

    <!-- Modal ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
    <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="tutorial-modal">
        <div class="game-container rounded-2xl p-8 max-w-2xl mx-4 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-gray-800" id="tutorial-title">üìñ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
                <button class="text-gray-500 hover:text-gray-700 text-2xl" id="close-tutorial">&times;</button>
            </div>
            <div id="tutorial-content" class="text-gray-700 space-y-4">
                <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </div>
        </div>
    </div>

    <!-- Modal ‡πÄ‡∏Å‡∏°‡∏à‡∏ö -->
    <div class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" id="game-over-modal">
        <div class="game-container rounded-2xl p-8 max-w-lg mx-4">
            <div class="text-center">
                <div class="text-6xl mb-4">üèÅ</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h2>
                <div class="space-y-3 mb-6" id="final-stats">
                    <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <button class="px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold transition-colors" id="play-again">
                        üîÑ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
                    </button>
                    <button class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition-colors" id="share-score">
                        üì§ ‡πÅ‡∏ä‡∏£‡πå‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class RailwayMaintenanceGame {
            constructor() {
                this.gameState = {
                    money: 5000,
                    level: 1,
                    score: 0,
                    experience: 0,
                    experienceToNext: 100,
                    energy: 100,
                    repairsCompleted: 0,
                    dailyRepairs: 0,
                    streak: 0,
                    
                    // ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
                    selectedTool: null,
                    tools: {
                        hammer: { name: '‡∏Ñ‡πâ‡∏≠‡∏ô‡∏ó‡∏∏‡∏ö‡∏£‡∏≤‡∏á', icon: 'üî®', efficiency: 1.0, cost: 10, description: '‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≠‡∏¢‡πÅ‡∏ï‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏¢‡∏ö‡∏¥‡πà‡∏ô' },
                        wrench: { name: '‡∏õ‡∏£‡∏∞‡πÅ‡∏à‡∏Ç‡∏±‡∏ô‡∏ô‡πá‡∏≠‡∏ï', icon: 'üîß', efficiency: 1.2, cost: 15, description: '‡∏Ç‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏≤‡∏¢‡∏ô‡πá‡∏≠‡∏ï‡∏¢‡∏∂‡∏î‡∏£‡∏≤‡∏á' },
                        welder: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á', icon: '‚ö°', efficiency: 1.5, cost: 25, description: '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏Å' },
                        grinder: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏à‡∏µ‡∏¢‡∏£‡∏£‡∏≤‡∏á', icon: '‚öôÔ∏è', efficiency: 1.3, cost: 20, description: '‡∏Ç‡∏±‡∏î‡∏ú‡∏¥‡∏ß‡∏£‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏™‡∏ô‡∏¥‡∏°' },
                        drill: { name: '‡∏™‡∏ß‡πà‡∏≤‡∏ô‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏≤‡∏á', icon: 'ü™ö', efficiency: 1.1, cost: 12, description: '‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πá‡∏≠‡∏ï‡πÉ‡∏´‡∏°‡πà' },
                        scanner: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏£‡∏≤‡∏á', icon: 'üì°', efficiency: 2.0, cost: 5, description: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô' },
                        railSaw: { name: '‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏¢‡∏ï‡∏±‡∏î‡∏£‡∏≤‡∏á', icon: 'ü™ö', efficiency: 1.4, cost: 30, description: '‡∏ï‡∏±‡∏î‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å' },
                        railLifter: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏Å‡∏£‡∏≤‡∏á', icon: 'üèóÔ∏è', efficiency: 1.6, cost: 35, description: '‡∏¢‡∏Å‡∏£‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏°‡πÉ‡∏ï‡πâ‡∏£‡∏≤‡∏á' },
                        railBender: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏±‡∏î‡∏£‡∏≤‡∏á', icon: 'üîÑ', efficiency: 1.3, cost: 28, description: '‡∏î‡∏±‡∏î‡∏£‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á' },
                        thermometer: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥', icon: 'üå°Ô∏è', efficiency: 1.1, cost: 8, description: '‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏£‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢' }
                    },
                    
                    // ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                    weatherProtection: {
                        sunny: false,
                        cloudy: false,
                        rainy: false,
                        stormy: false,
                        foggy: false,
                        hot: false,
                        cold: false
                    },
                    
                    // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°
                    damages: [],
                    damageTypes: {
                        crack: { name: '‡∏£‡∏≠‡∏¢‡πÅ‡∏ï‡∏Å', severity: 'minor', tool: 'hammer', reward: 100, icon: 'üí•' },
                        loose: { name: '‡∏ô‡πá‡∏≠‡∏ï‡∏´‡∏•‡∏ß‡∏°', severity: 'minor', tool: 'wrench', reward: 80, icon: 'üî©' },
                        rust: { name: '‡∏™‡∏ô‡∏¥‡∏°', severity: 'major', tool: 'grinder', reward: 150, icon: 'ü¶†' },
                        break: { name: '‡∏´‡∏±‡∏Å', severity: 'critical', tool: 'welder', reward: 300, icon: 'üíî' },
                        hole: { name: '‡∏£‡∏π‡∏£‡∏±‡πà‡∏ß', severity: 'major', tool: 'drill', reward: 200, icon: 'üï≥Ô∏è' },
                        wear: { name: '‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠', severity: 'minor', tool: 'grinder', reward: 120, icon: '‚ö´' }
                    },
                    
                    // ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°
                    weather: 'sunny',
                    temperature: 32,
                    gameTime: 8.0, // 8:00 AM
                    
                    // ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                    achievements: [],
                    qualityScore: 100,
                    safetyLevel: '‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢',
                    efficiency: 95,
                    
                    // ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡πÄ‡∏ó‡∏°
                    upgrades: {
                        electricHammer: false,
                        magnifier: false,
                        superBattery: false
                    }
                };
                
                this.initializeGame();
                this.setupEventListeners();
                this.startGameLoop();
            }
            
            initializeGame() {
                this.addNews('üéÆ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡πÑ‡∏ó‡∏¢!');
                this.addNews('üí° ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢');
                this.addNews('üîß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°');
                
                this.generateInitialDamages();
                this.updateAllDisplays();
                this.updateWeather();
            }
            
            setupEventListeners() {
                // ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πÅ‡∏Å‡∏ô
                document.getElementById('scan-btn').addEventListener('click', () => this.scanForDamages());
                document.getElementById('full-scan-btn').addEventListener('click', () => this.fullSystemScan());
                document.getElementById('quick-scan-btn').addEventListener('click', () => this.quickScan());
                document.getElementById('deep-scan-btn').addEventListener('click', () => this.deepScan());
                document.getElementById('thermal-scan-btn').addEventListener('click', () => this.thermalScan());
                
                // ‡∏õ‡∏∏‡πà‡∏°‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                document.getElementById('auto-repair-btn').addEventListener('click', () => this.autoRepair());
                
                // ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ - ‡πÉ‡∏ä‡πâ event delegation ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
                document.getElementById('tool-inventory').addEventListener('click', (e) => {
                    const toolElement = e.target.closest('.repair-tool');
                    if (toolElement && toolElement.dataset.tool) {
                        this.selectTool(toolElement.dataset.tool);
                    }
                });
                
                // ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
                document.querySelectorAll('[data-item]').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const item = e.target.dataset.item;
                        const price = parseInt(e.target.dataset.price);
                        this.buyUpgrade(item, price);
                    });
                });
                
                // ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                document.querySelectorAll('[data-weather]').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const weather = e.target.dataset.weather;
                        const price = parseInt(e.target.dataset.price);
                        this.buyWeatherProtection(weather, price);
                    });
                });
                
                // Modal
                document.getElementById('close-achievement').addEventListener('click', () => this.closeAchievementModal());
                document.getElementById('close-level-up').addEventListener('click', () => this.closeLevelUpModal());
                document.getElementById('close-tutorial').addEventListener('click', () => this.closeTutorialModal());
                document.getElementById('play-again').addEventListener('click', () => this.resetGame());
                document.getElementById('share-score').addEventListener('click', () => this.shareScore());
                
                // ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü
                document.getElementById('rail-area').addEventListener('click', (e) => this.handleRailClick(e));
            }
            
            generateInitialDamages() {
                const damageCount = 3 + Math.floor(Math.random() * 3);
                for (let i = 0; i < damageCount; i++) {
                    this.generateRandomDamage();
                }
            }
            
            generateRandomDamage() {
                const types = Object.keys(this.gameState.damageTypes);
                const type = types[Math.floor(Math.random() * types.length)];
                const damageInfo = this.gameState.damageTypes[type];
                
                const damage = {
                    id: Date.now() + Math.random(),
                    type: type,
                    x: Math.random() * 80 + 10, // 10-90% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á
                    y: Math.random() * 60 + 20, // 20-80% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á
                    severity: damageInfo.severity,
                    discovered: false,
                    repaired: false,
                    repairProgress: 0
                };
                
                this.gameState.damages.push(damage);
            }
            
            scanForDamages() {
                if (this.gameState.energy < 10) {
                    this.addNews('‚ö†Ô∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô!');
                    return;
                }
                
                this.gameState.energy -= 10;
                this.addDiagnosticMessage('> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢...');
                
                let discovered = 0;
                this.gameState.damages.forEach(damage => {
                    if (!damage.discovered && Math.random() < 0.7) {
                        damage.discovered = true;
                        discovered++;
                        this.createDamageVisual(damage);
                    }
                });
                
                this.addDiagnosticMessage(`> ‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ${discovered} ‡∏à‡∏∏‡∏î`);
                this.addNews(`üîç ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô ‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ${discovered} ‡∏à‡∏∏‡∏î`);
                
                if (discovered > 0) {
                    this.gainExperience(discovered * 10);
                }
                
                this.updateAllDisplays();
            }
            
            fullSystemScan() {
                if (this.gameState.energy < 30) {
                    this.addNews('‚ö†Ô∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö!');
                    return;
                }
                
                this.gameState.energy -= 30;
                this.addDiagnosticMessage('> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö...');
                this.addDiagnosticMessage('> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á...');
                
                setTimeout(() => {
                    let discovered = 0;
                    this.gameState.damages.forEach(damage => {
                        if (!damage.discovered) {
                            damage.discovered = true;
                            discovered++;
                            this.createDamageVisual(damage);
                        }
                    });
                    
                    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà
                    for (let i = 0; i < 2; i++) {
                        this.generateRandomDamage();
                        const newDamage = this.gameState.damages[this.gameState.damages.length - 1];
                        newDamage.discovered = true;
                        this.createDamageVisual(newDamage);
                        discovered++;
                    }
                    
                    this.addDiagnosticMessage(`> ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô ‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ${discovered} ‡∏à‡∏∏‡∏î`);
                    this.addNews(`üîç ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô ‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ${discovered} ‡∏à‡∏∏‡∏î`);
                    this.gainExperience(discovered * 15);
                    this.updateAllDisplays();
                }, 2000);
            }
            
            quickScan() {
                if (this.gameState.energy < 5) {
                    this.addNews('‚ö†Ô∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠!');
                    return;
                }
                
                this.gameState.energy -= 5;
                this.addDiagnosticMessage('> ‡∏™‡πÅ‡∏Å‡∏ô‡∏î‡πà‡∏ß‡∏ô...');
                
                const undiscovered = this.gameState.damages.filter(d => !d.discovered);
                if (undiscovered.length > 0) {
                    const damage = undiscovered[Math.floor(Math.random() * undiscovered.length)];
                    damage.discovered = true;
                    this.createDamageVisual(damage);
                    this.addDiagnosticMessage('> ‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ 1 ‡∏à‡∏∏‡∏î');
                    this.addNews('üîç ‡∏™‡πÅ‡∏Å‡∏ô‡∏î‡πà‡∏ß‡∏ô‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ 1 ‡∏à‡∏∏‡∏î');
                    this.gainExperience(5);
                } else {
                    this.addDiagnosticMessage('> ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà');
                }
                
                this.updateAllDisplays();
            }
            
            deepScan() {
                if (this.gameState.energy < 20) {
                    this.addNews('‚ö†Ô∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏•‡∏∂‡∏Å!');
                    return;
                }
                
                this.gameState.energy -= 20;
                this.addDiagnosticMessage('> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏•‡∏∂‡∏Å...');
                this.addDiagnosticMessage('> ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô...');
                
                setTimeout(() => {
                    // ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏•‡∏∂‡∏Å
                    for (let i = 0; i < 3; i++) {
                        this.generateRandomDamage();
                        const newDamage = this.gameState.damages[this.gameState.damages.length - 1];
                        newDamage.discovered = true;
                        newDamage.severity = 'critical'; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏•‡∏∂‡∏Å‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á
                        this.createDamageVisual(newDamage);
                    }
                    
                    this.addDiagnosticMessage('> ‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏•‡∏∂‡∏Å 3 ‡∏à‡∏∏‡∏î (‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á)');
                    this.addNews('üéØ ‡∏™‡πÅ‡∏Å‡∏ô‡∏•‡∏∂‡∏Å‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á 3 ‡∏à‡∏∏‡∏î!');
                    this.gainExperience(45);
                    this.updateAllDisplays();
                }, 3000);
            }
            
            thermalScan() {
                if (this.gameState.energy < 15) {
                    this.addNews('‚ö†Ô∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô!');
                    return;
                }
                
                this.gameState.energy -= 15;
                this.addDiagnosticMessage('> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô...');
                this.addDiagnosticMessage('> ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏à‡∏∏‡∏î‡∏£‡πâ‡∏≠‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥...');
                
                setTimeout(() => {
                    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
                    this.gameState.temperature = 28 + Math.random() * 10;
                    
                    // ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô
                    const heatDamages = ['rust', 'wear'];
                    for (let i = 0; i < 2; i++) {
                        const damage = {
                            id: Date.now() + Math.random(),
                            type: heatDamages[Math.floor(Math.random() * heatDamages.length)],
                            x: Math.random() * 80 + 10,
                            y: Math.random() * 60 + 20,
                            severity: 'major',
                            discovered: true,
                            repaired: false,
                            repairProgress: 0
                        };
                        this.gameState.damages.push(damage);
                        this.createDamageVisual(damage);
                    }
                    
                    this.addDiagnosticMessage(`> ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ${this.gameState.temperature.toFixed(1)}¬∞C`);
                    this.addDiagnosticMessage('> ‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô 2 ‡∏à‡∏∏‡∏î');
                    this.addNews('üå°Ô∏è ‡∏™‡πÅ‡∏Å‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô');
                    this.gainExperience(30);
                    this.updateAllDisplays();
                }, 2500);
            }
            
            createDamageVisual(damage) {
                const damageArea = document.getElementById('damage-areas');
                const damageElement = document.createElement('div');
                const damageInfo = this.gameState.damageTypes[damage.type];
                
                damageElement.className = `damage-indicator absolute w-8 h-8 rounded-full flex items-center justify-center cursor-pointer damage-type-${damage.severity}`;
                damageElement.style.left = `${damage.x}%`;
                damageElement.style.top = `${damage.y}%`;
                damageElement.innerHTML = `<span class="text-white font-bold text-lg">${damageInfo.icon}</span>`;
                damageElement.dataset.damageId = damage.id;
                damageElement.title = `${damageInfo.name} (${damage.severity})`;
                
                damageElement.addEventListener('click', () => this.repairDamage(damage.id));
                
                damageArea.appendChild(damageElement);
            }
            
            selectTool(toolName) {
                console.log('Selecting tool:', toolName); // Debug log
                
                if (!this.gameState.tools[toolName]) {
                    console.error('Tool not found:', toolName);
                    return;
                }
                
                this.gameState.selectedTool = toolName;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
                document.querySelectorAll('.repair-tool').forEach(tool => {
                    tool.classList.remove('selected');
                });
                
                const selectedToolElement = document.querySelector(`[data-tool="${toolName}"]`);
                if (selectedToolElement) {
                    selectedToolElement.classList.add('selected');
                }
                
                document.getElementById('selected-tool').textContent = this.gameState.tools[toolName].name;
                
                this.addNews(`üîß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠: ${this.gameState.tools[toolName].name}`);
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
                this.addDiagnosticMessage(`> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠: ${this.gameState.tools[toolName].name}`);
            }
            
            repairDamage(damageId) {
                const damage = this.gameState.damages.find(d => d.id === damageId);
                if (!damage || damage.repaired) return;
                
                if (!this.gameState.selectedTool) {
                    this.addNews('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ã‡πà‡∏≠‡∏°!');
                    this.showTutorial('selectTool');
                    return;
                }
                
                const damageInfo = this.gameState.damageTypes[damage.type];
                const tool = this.gameState.tools[this.gameState.selectedTool];
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô
                if (this.gameState.energy < tool.cost) {
                    this.addNews('‚ö†Ô∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°!');
                    return;
                }
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                const weatherEffect = this.getWeatherEffect();
                if (weatherEffect < 0.8 && !this.gameState.weatherProtection[this.gameState.weather]) {
                    this.addNews(`‚ö†Ô∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°! ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô`);
                    return;
                }
                
                this.gameState.energy -= tool.cost;
                
                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°
                let efficiency = tool.efficiency;
                if (damageInfo.tool === this.gameState.selectedTool) {
                    efficiency *= 1.8; // ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
                    this.addNews(`üéØ ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°! ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û +80%`);
                }
                
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                efficiency *= weatherEffect;
                
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
                if (this.gameState.weatherProtection[this.gameState.weather]) {
                    efficiency *= 1.2;
                }
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°
                const progress = efficiency * 25;
                damage.repairProgress += progress;
                
                // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°
                this.createRepairEffect(damage, progress);
                
                if (damage.repairProgress >= 100) {
                    // ‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                    damage.repaired = true;
                    this.gameState.repairsCompleted++;
                    this.gameState.dailyRepairs++;
                    
                    // ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
                    let reward = Math.floor(damageInfo.reward * (1 + this.gameState.level * 0.1));
                    
                    // ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                    if (weatherEffect < 0.8) {
                        reward *= 1.5; // ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏•‡∏ß‡∏£‡πâ‡∏≤‡∏¢
                        this.addNews(`üåü ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏•‡∏ß‡∏£‡πâ‡∏≤‡∏¢ +50%!`);
                    }
                    
                    this.gameState.money += reward;
                    this.gameState.score += reward;
                    
                    // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢
                    const damageElement = document.querySelector(`[data-damage-id="${damageId}"]`);
                    if (damageElement) {
                        damageElement.classList.add('repair-success');
                        setTimeout(() => damageElement.remove(), 1000);
                    }
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
                    this.showMoneyPopup(reward, damageElement);
                    this.createSparkEffect(damageElement);
                    this.createRepairCompleteEffect(damageElement);
                    
                    this.addNews(`‚úÖ ‡∏ã‡πà‡∏≠‡∏°${damageInfo.name}‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô ‡∏£‡∏±‡∏ö ${reward} ‡∏ö‡∏≤‡∏ó`);
                    this.gainExperience(20 + (damage.severity === 'critical' ? 30 : damage.severity === 'major' ? 15 : 5));
                    
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                    this.checkAchievements();
                } else {
                    // ‡∏ã‡πà‡∏≠‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à
                    const damageElement = document.querySelector(`[data-damage-id="${damageId}"]`);
                    if (damageElement) {
                        damageElement.classList.add('repair-animation');
                        setTimeout(() => damageElement.classList.remove('repair-animation'), 2000);
                    }
                    
                    this.addNews(`üîß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡πà‡∏≠‡∏°${damageInfo.name} (${Math.floor(damage.repairProgress)}%)`);
                }
                
                this.updateAllDisplays();
            }
            
            autoRepair() {
                if (this.gameState.money < 500) {
                    this.addNews('‚ö†Ô∏è ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ 500 ‡∏ö‡∏≤‡∏ó)');
                    return;
                }
                
                this.gameState.money -= 500;
                
                const discoveredDamages = this.gameState.damages.filter(d => d.discovered && !d.repaired);
                if (discoveredDamages.length === 0) {
                    this.addNews('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡πà‡∏≠‡∏°');
                    return;
                }
                
                this.addNews('ü§ñ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥...');
                
                let repairCount = 0;
                discoveredDamages.forEach((damage, index) => {
                    setTimeout(() => {
                        damage.repaired = true;
                        this.gameState.repairsCompleted++;
                        this.gameState.dailyRepairs++;
                        
                        const damageInfo = this.gameState.damageTypes[damage.type];
                        const reward = Math.floor(damageInfo.reward * 0.7); // ‡∏•‡∏î‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• 30% ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                        this.gameState.money += reward;
                        this.gameState.score += reward;
                        
                        const damageElement = document.querySelector(`[data-damage-id="${damage.id}"]`);
                        if (damageElement) {
                            damageElement.classList.add('repair-success');
                            setTimeout(() => damageElement.remove(), 1000);
                        }
                        
                        repairCount++;
                        if (repairCount === discoveredDamages.length) {
                            this.addNews(`ü§ñ ‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô ‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß ${repairCount} ‡∏à‡∏∏‡∏î`);
                            this.gainExperience(repairCount * 10);
                        }
                        
                        this.updateAllDisplays();
                    }, index * 1000);
                });
            }
            
            handleRailClick(event) {
                if (!this.gameState.selectedTool) return;
                
                const rect = event.currentTarget.getBoundingClientRect();
                const x = ((event.clientX - rect.left) / rect.width) * 100;
                const y = ((event.clientY - rect.top) / rect.height) * 100;
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠
                this.createToolEffect(x, y);
                
                // ‡∏•‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô
                const tool = this.gameState.tools[this.gameState.selectedTool];
                if (this.gameState.energy >= tool.cost) {
                    this.gameState.energy -= tool.cost;
                    this.updateAllDisplays();
                }
            }
            
            createToolEffect(x, y) {
                const railArea = document.getElementById('rail-area');
                const effect = document.createElement('div');
                effect.className = 'absolute w-4 h-4 bg-yellow-400 rounded-full animate-ping';
                effect.style.left = `${x}%`;
                effect.style.top = `${y}%`;
                
                railArea.appendChild(effect);
                setTimeout(() => effect.remove(), 1000);
            }
            
            createSparkEffect(element) {
                if (!element) return;
                
                const rect = element.getBoundingClientRect();
                const container = document.getElementById('particle-container');
                
                for (let i = 0; i < 5; i++) {
                    const spark = document.createElement('div');
                    spark.className = 'spark-effect';
                    spark.style.left = `${rect.left + rect.width/2}px`;
                    spark.style.top = `${rect.top + rect.height/2}px`;
                    spark.style.setProperty('--spark-x', `${(Math.random() - 0.5) * 100}px`);
                    spark.style.setProperty('--spark-y', `${-Math.random() * 50}px`);
                    
                    container.appendChild(spark);
                    setTimeout(() => spark.remove(), 1000);
                }
            }
            
            showMoneyPopup(amount, element) {
                const popup = document.createElement('div');
                popup.className = 'money-popup fixed text-2xl font-bold text-green-500 pointer-events-none z-50';
                popup.textContent = `+${amount} ‡∏ø`;
                
                if (element) {
                    const rect = element.getBoundingClientRect();
                    popup.style.left = `${rect.left + rect.width/2}px`;
                    popup.style.top = `${rect.top}px`;
                } else {
                    popup.style.left = '50%';
                    popup.style.top = '30%';
                    popup.style.transform = 'translateX(-50%)';
                }
                
                document.body.appendChild(popup);
                setTimeout(() => popup.remove(), 2000);
            }
            
            gainExperience(amount) {
                this.gameState.experience += amount;
                
                if (this.gameState.experience >= this.gameState.experienceToNext) {
                    this.levelUp();
                }
                
                this.updateAllDisplays();
            }
            
            levelUp() {
                this.gameState.level++;
                this.gameState.experience = 0;
                this.gameState.experienceToNext = this.gameState.level * 100;
                this.gameState.money += 1000;
                this.gameState.energy = 100;
                
                // ‡πÅ‡∏™‡∏î‡∏á Modal ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö
                document.getElementById('new-level').textContent = this.gameState.level;
                document.getElementById('level-up-modal').classList.remove('hidden');
                document.getElementById('level-up-modal').classList.add('flex');
                
                this.addNews(`üéâ ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô ${this.gameState.level}!`);
                
                // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà
                if (this.gameState.level === 3) {
                    this.addNews('üîì ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ: ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÑ‡∏ü‡∏ü‡πâ‡∏≤');
                } else if (this.gameState.level === 5) {
                    this.addNews('üîì ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á');
                }
            }
            
            checkAchievements() {
                const achievements = [
                    {
                        id: 'first_repair',
                        title: '‡∏ä‡πà‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà',
                        description: '‡∏ã‡πà‡∏≠‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å',
                        condition: () => this.gameState.repairsCompleted >= 1,
                        reward: 500,
                        icon: 'üîß'
                    },
                    {
                        id: 'repair_master',
                        title: '‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô',
                        description: '‡∏ã‡πà‡∏≠‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ 10 ‡∏à‡∏∏‡∏î',
                        condition: () => this.gameState.repairsCompleted >= 10,
                        reward: 1000,
                        icon: 'üèÜ'
                    },
                    {
                        id: 'speed_demon',
                        title: '‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏£‡πá‡∏ß',
                        description: '‡∏ã‡πà‡∏≠‡∏° 5 ‡∏à‡∏∏‡∏î‡πÉ‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ',
                        condition: () => this.gameState.dailyRepairs >= 5,
                        reward: 800,
                        icon: '‚ö°'
                    },
                    {
                        id: 'millionaire',
                        title: '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏µ',
                        description: '‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô 10,000 ‡∏ö‡∏≤‡∏ó',
                        condition: () => this.gameState.money >= 10000,
                        reward: 2000,
                        icon: 'üí∞'
                    }
                ];
                
                achievements.forEach(achievement => {
                    if (!this.gameState.achievements.includes(achievement.id) && achievement.condition()) {
                        this.gameState.achievements.push(achievement.id);
                        this.showAchievement(achievement);
                    }
                });
            }
            
            showAchievement(achievement) {
                document.getElementById('achievement-icon').textContent = achievement.icon;
                document.getElementById('achievement-title').textContent = achievement.title;
                document.getElementById('achievement-description').textContent = achievement.description;
                document.getElementById('achievement-reward').textContent = `+${achievement.reward} ‡∏ø`;
                
                document.getElementById('achievement-modal').classList.remove('hidden');
                document.getElementById('achievement-modal').classList.add('flex');
                
                this.gameState.money += achievement.reward;
                this.addNews(`üèÜ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${achievement.title}`);
            }
            
            buyUpgrade(item, price) {
                if (this.gameState.money < price) {
                    this.addNews(`‚ö†Ô∏è ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${price} ‡∏ö‡∏≤‡∏ó`);
                    return;
                }
                
                if (this.gameState.upgrades[item.replace('-', '')]) {
                    this.addNews('‚ö†Ô∏è ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß');
                    return;
                }
                
                this.gameState.money -= price;
                this.gameState.upgrades[item.replace('-', '')] = true;
                
                const upgrades = {
                    'electric-hammer': '‡∏Ñ‡πâ‡∏≠‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏ã‡πà‡∏≠‡∏° +50%',
                    'magnifier': '‡πÄ‡∏•‡∏ô‡∏™‡πå‡∏Ç‡∏¢‡∏≤‡∏¢ - ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô',
                    'super-battery': '‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏© - ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î'
                };
                
                this.addNews(`‚úÖ ‡∏ã‡∏∑‡πâ‡∏≠ ${upgrades[item]} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
                
                // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°
                document.querySelector(`[data-item="${item}"]`).disabled = true;
                document.querySelector(`[data-item="${item}"]`).textContent = '‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß';
                document.querySelector(`[data-item="${item}"]`).classList.remove('bg-green-600', 'hover:bg-green-700');
                document.querySelector(`[data-item="${item}"]`).classList.add('bg-gray-400');
                
                this.updateAllDisplays();
            }
            
            buyWeatherProtection(weather, price) {
                if (this.gameState.money < price) {
                    this.addNews(`‚ö†Ô∏è ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${price} ‡∏ö‡∏≤‡∏ó`);
                    return;
                }
                
                if (this.gameState.weatherProtection[weather]) {
                    this.addNews('‚ö†Ô∏è ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß');
                    return;
                }
                
                this.gameState.money -= price;
                this.gameState.weatherProtection[weather] = true;
                
                const protections = {
                    'rainy': '‚òÇÔ∏è ‡∏£‡πà‡∏°‡∏Å‡∏±‡∏ô‡∏ù‡∏ô',
                    'stormy': 'üå™Ô∏è ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏±‡∏ô‡∏û‡∏≤‡∏¢‡∏∏',
                    'sunny': 'üï∂Ô∏è ‡πÅ‡∏ß‡πà‡∏ô‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á',
                    'foggy': 'üå´Ô∏è ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å‡∏Å‡∏±‡∏ô‡∏´‡∏°‡∏≠‡∏Å',
                    'cold': 'üß• ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡∏≤‡∏ß',
                    'hot': '‚ùÑÔ∏è ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô'
                };
                
                this.addNews(`‚úÖ ‡∏ã‡∏∑‡πâ‡∏≠ ${protections[weather]} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
                this.addNews(`üõ°Ô∏è ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®${weather}‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß`);
                
                // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°
                const button = document.querySelector(`[data-weather="${weather}"]`);
                if (button) {
                    button.disabled = true;
                    button.textContent = '‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß';
                    button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                    button.classList.add('bg-gray-400');
                }
                
                this.updateAllDisplays();
            }
            
            updateWeather() {
                const weathers = [
                    { type: 'sunny', icon: '‚òÄÔ∏è', name: '‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™', effect: 1.0 },
                    { type: 'cloudy', icon: '‚òÅÔ∏è', name: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü', effect: 0.9 },
                    { type: 'rainy', icon: 'üåßÔ∏è', name: '‡∏ù‡∏ô‡∏ï‡∏Å', effect: 0.6 },
                    { type: 'stormy', icon: '‚õàÔ∏è', name: '‡∏û‡∏≤‡∏¢‡∏∏', effect: 0.4 },
                    { type: 'foggy', icon: 'üå´Ô∏è', name: '‡∏´‡∏°‡∏≠‡∏Å‡∏´‡∏ô‡∏≤', effect: 0.7 },
                    { type: 'hot', icon: 'üî•', name: '‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î', effect: 0.8 },
                    { type: 'cold', icon: '‚ùÑÔ∏è', name: '‡∏´‡∏ô‡∏≤‡∏ß‡∏à‡∏±‡∏î', effect: 0.8 }
                ];
                
                const weather = weathers[Math.floor(Math.random() * weathers.length)];
                this.gameState.weather = weather.type;
                
                document.getElementById('weather-icon').textContent = weather.icon;
                document.getElementById('weather-status').textContent = weather.name;
                
                // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                const weatherEffect = document.getElementById('weather-effect');
                weatherEffect.className = 'weather-effect';
                
                if (weather.type === 'rainy' || weather.type === 'stormy') {
                    weatherEffect.classList.add('rain-effect');
                }
                
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                if (weather.type === 'hot') {
                    this.gameState.temperature = 38 + Math.random() * 5;
                } else if (weather.type === 'cold') {
                    this.gameState.temperature = 15 + Math.random() * 5;
                } else {
                    this.gameState.temperature = 28 + Math.random() * 8;
                }
                
                // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                if (weather.effect < 0.8) {
                    this.addNews(`üå¶Ô∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®${weather.name} ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô!`);
                    if (!this.gameState.weatherProtection[weather.type]) {
                        this.addNews(`üí° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®`);
                    }
                }
            }
            
            getWeatherEffect() {
                const weathers = {
                    'sunny': 1.0,
                    'cloudy': 0.9,
                    'rainy': 0.6,
                    'stormy': 0.4,
                    'foggy': 0.7,
                    'hot': 0.8,
                    'cold': 0.8
                };
                return weathers[this.gameState.weather] || 1.0;
            }
            
            showTutorial(type) {
                const tutorials = {
                    basic: {
                        title: 'üéØ ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô',
                        content: `
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-lg mb-2">üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡πà‡∏ô</h4>
                                    <p>1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üîç ‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡πà‡∏≠‡∏°</p>
                                    <p>2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠</p>
                                    <p>3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏°</p>
                                    <p>4. ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-2">‚å®Ô∏è ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏±‡∏î</h4>
                                    <p>‚Ä¢ ‡∏õ‡∏∏‡πà‡∏° 1-0: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠</p>
                                    <p>‚Ä¢ Space: ‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</p>
                                    <p>‚Ä¢ R: ‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                                </div>
                            </div>
                        `
                    },
                    tools: {
                        title: 'üîß ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á',
                        content: `
                            <div class="space-y-3">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <h5 class="font-bold">üî® ‡∏Ñ‡πâ‡∏≠‡∏ô‡∏ó‡∏∏‡∏ö‡∏£‡∏≤‡∏á</h5>
                                        <p class="text-sm">‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≠‡∏¢‡πÅ‡∏ï‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏¢‡∏ö‡∏¥‡πà‡∏ô‡∏ö‡∏ô‡∏£‡∏≤‡∏á</p>
                                    </div>
                                    <div>
                                        <h5 class="font-bold">üîß ‡∏õ‡∏£‡∏∞‡πÅ‡∏à‡∏Ç‡∏±‡∏ô‡∏ô‡πá‡∏≠‡∏ï</h5>
                                        <p class="text-sm">‡∏Ç‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏≤‡∏¢‡∏ô‡πá‡∏≠‡∏ï‡∏¢‡∏∂‡∏î‡∏£‡∏≤‡∏á</p>
                                    </div>
                                    <div>
                                        <h5 class="font-bold">‚ö° ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á</h5>
                                        <p class="text-sm">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πÅ‡∏£‡∏á</p>
                                    </div>
                                    <div>
                                        <h5 class="font-bold">‚öôÔ∏è ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏à‡∏µ‡∏¢‡∏£‡∏£‡∏≤‡∏á</h5>
                                        <p class="text-sm">‡∏Ç‡∏±‡∏î‡∏ú‡∏¥‡∏ß‡∏£‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏™‡∏ô‡∏¥‡∏°</p>
                                    </div>
                                    <div>
                                        <h5 class="font-bold">ü™ö ‡∏™‡∏ß‡πà‡∏≤‡∏ô‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏≤‡∏á</h5>
                                        <p class="text-sm">‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πá‡∏≠‡∏ï‡πÉ‡∏´‡∏°‡πà</p>
                                    </div>
                                    <div>
                                        <h5 class="font-bold">üì° ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏£‡∏≤‡∏á</h5>
                                        <p class="text-sm">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô</p>
                                    </div>
                                </div>
                                <div class="bg-yellow-50 p-3 rounded">
                                    <p class="font-bold text-yellow-800">üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:</p>
                                    <p class="text-yellow-700">‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û +80%!</p>
                                </div>
                            </div>
                        `
                    },
                    weather: {
                        title: 'üå¶Ô∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®',
                        content: `
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-lg mb-2">üå§Ô∏è ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</h4>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>‚òÄÔ∏è ‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏õ‡∏Å‡∏ï‡∏¥</div>
                                        <div>‚òÅÔ∏è ‡∏°‡∏µ‡πÄ‡∏°‡∏Ü: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û -10%</div>
                                        <div>üåßÔ∏è ‡∏ù‡∏ô‡∏ï‡∏Å: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û -40%</div>
                                        <div>‚õàÔ∏è ‡∏û‡∏≤‡∏¢‡∏∏: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û -60%</div>
                                        <div>üå´Ô∏è ‡∏´‡∏°‡∏≠‡∏Å‡∏´‡∏ô‡∏≤: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û -30%</div>
                                        <div>üî• ‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û -20%</div>
                                        <div>‚ùÑÔ∏è ‡∏´‡∏ô‡∏≤‡∏ß‡∏à‡∏±‡∏î: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û -20%</div>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-2">üõ°Ô∏è ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô</h4>
                                    <p>‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û +20%</p>
                                    <p>‚Ä¢ ‚òÇÔ∏è ‡∏£‡πà‡∏°‡∏Å‡∏±‡∏ô‡∏ù‡∏ô - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏ô</p>
                                    <p>‚Ä¢ üå™Ô∏è ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏±‡∏ô‡∏û‡∏≤‡∏¢‡∏∏ - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏û‡∏≤‡∏¢‡∏∏</p>
                                    <p>‚Ä¢ üï∂Ô∏è ‡πÅ‡∏ß‡πà‡∏ô‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î</p>
                                </div>
                                <div class="bg-blue-50 p-3 rounded">
                                    <p class="font-bold text-blue-800">üåü ‡πÇ‡∏ö‡∏ô‡∏±‡∏™:</p>
                                    <p class="text-blue-700">‡∏ã‡πà‡∏≠‡∏°‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏•‡∏ß‡∏£‡πâ‡∏≤‡∏¢‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏° +50%!</p>
                                </div>
                            </div>
                        `
                    },
                    damage: {
                        title: 'üí• ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢',
                        content: `
                            <div class="space-y-4">
                                <div class="grid grid-cols-1 gap-3">
                                    <div class="border-l-4 border-yellow-400 pl-3">
                                        <h5 class="font-bold text-yellow-600">üü° ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (Minor)</h5>
                                        <p>üí• ‡∏£‡∏≠‡∏¢‡πÅ‡∏ï‡∏Å - ‡πÉ‡∏ä‡πâ‡∏Ñ‡πâ‡∏≠‡∏ô‡∏ó‡∏∏‡∏ö‡∏£‡∏≤‡∏á</p>
                                        <p>üî© ‡∏ô‡πá‡∏≠‡∏ï‡∏´‡∏•‡∏ß‡∏° - ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÅ‡∏à‡∏Ç‡∏±‡∏ô‡∏ô‡πá‡∏≠‡∏ï</p>
                                        <p>‚ö´ ‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠ - ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏à‡∏µ‡∏¢‡∏£‡∏£‡∏≤‡∏á</p>
                                    </div>
                                    <div class="border-l-4 border-orange-400 pl-3">
                                        <h5 class="font-bold text-orange-600">üü† ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (Major)</h5>
                                        <p>ü¶† ‡∏™‡∏ô‡∏¥‡∏° - ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏à‡∏µ‡∏¢‡∏£‡∏£‡∏≤‡∏á</p>
                                        <p>üï≥Ô∏è ‡∏£‡∏π‡∏£‡∏±‡πà‡∏ß - ‡πÉ‡∏ä‡πâ‡∏™‡∏ß‡πà‡∏≤‡∏ô‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏≤‡∏á</p>
                                    </div>
                                    <div class="border-l-4 border-red-400 pl-3">
                                        <h5 class="font-bold text-red-600">üî¥ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á (Critical)</h5>
                                        <p>üíî ‡∏£‡∏≤‡∏á‡∏´‡∏±‡∏Å - ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á</p>
                                    </div>
                                </div>
                                <div class="bg-red-50 p-3 rounded">
                                    <p class="font-bold text-red-800">‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</p>
                                    <p class="text-red-700">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡πà‡∏≠‡∏°‡∏î‡πà‡∏ß‡∏ô! ‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏π‡∏á‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏°‡∏≤‡∏Å</p>
                                </div>
                            </div>
                        `
                    },
                    tips: {
                        title: 'üí° ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö',
                        content: `
                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-lg mb-2">üéØ ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h4>
                                    <ul class="space-y-2">
                                        <li>‚Ä¢ ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏≠‡∏∑‡πà‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô</li>
                                        <li>‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™ +80%</li>
                                        <li>‚Ä¢ ‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û</li>
                                        <li>‚Ä¢ ‡∏ã‡πà‡∏≠‡∏°‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏•‡∏ß‡∏£‡πâ‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</li>
                                        <li>‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏¢‡∏≠‡∏∞</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-2">üí∞ ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h4>
                                    <ul class="space-y-2">
                                        <li>‚Ä¢ ‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏Å‡πà‡∏≠‡∏ô</li>
                                        <li>‚Ä¢ ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠</li>
                                        <li>‚Ä¢ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏¢‡∏≤‡∏°‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-2">‚ö° ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô</h4>
                                    <ul class="space-y-2">
                                        <li>‚Ä¢ ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ 0.5% ‡∏ï‡πà‡∏≠‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</li>
                                        <li>‚Ä¢ ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢</li>
                                        <li>‚Ä¢ ‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô</li>
                                    </ul>
                                </div>
                            </div>
                        `
                    },
                    selectTool: {
                        title: 'üîß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠',
                        content: `
                            <div class="text-center space-y-4">
                                <div class="text-6xl">üîß</div>
                                <h3 class="text-xl font-bold">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ã‡πà‡∏≠‡∏°!</h3>
                                <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° 1-0 ‡∏ö‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î</p>
                                <div class="bg-blue-50 p-4 rounded">
                                    <p class="font-bold text-blue-800">üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:</p>
                                    <p class="text-blue-700">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î!</p>
                                </div>
                            </div>
                        `
                    }
                };
                
                const tutorial = tutorials[type];
                if (tutorial) {
                    document.getElementById('tutorial-title').textContent = tutorial.title;
                    document.getElementById('tutorial-content').innerHTML = tutorial.content;
                    document.getElementById('tutorial-modal').classList.remove('hidden');
                    document.getElementById('tutorial-modal').classList.add('flex');
                }
            }
            
            closeTutorialModal() {
                document.getElementById('tutorial-modal').classList.add('hidden');
                document.getElementById('tutorial-modal').classList.remove('flex');
            }
            
            createRepairEffect(damage, progress) {
                const damageElement = document.querySelector(`[data-damage-id="${damage.id}"]`);
                if (!damageElement) return;
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡πÑ‡∏ü
                for (let i = 0; i < 3; i++) {
                    const spark = document.createElement('div');
                    spark.className = 'spark-effect';
                    spark.style.position = 'absolute';
                    spark.style.left = damageElement.style.left;
                    spark.style.top = damageElement.style.top;
                    spark.style.setProperty('--spark-x', `${(Math.random() - 0.5) * 60}px`);
                    spark.style.setProperty('--spark-y', `${-Math.random() * 40}px`);
                    
                    document.getElementById('particle-container').appendChild(spark);
                    setTimeout(() => spark.remove(), 1000);
                }
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
                if (progress > 0) {
                    const progressText = document.createElement('div');
                    progressText.className = 'absolute text-xs font-bold text-white bg-blue-600 px-2 py-1 rounded';
                    progressText.style.left = damageElement.style.left;
                    progressText.style.top = `calc(${damageElement.style.top} - 30px)`;
                    progressText.textContent = `${Math.floor(damage.repairProgress)}%`;
                    
                    document.getElementById('rail-area').appendChild(progressText);
                    setTimeout(() => progressText.remove(), 2000);
                }
            }
            
            createRepairCompleteEffect(element) {
                if (!element) return;
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏î‡∏≤‡∏ß‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î
                for (let i = 0; i < 8; i++) {
                    const star = document.createElement('div');
                    star.className = 'absolute text-yellow-400 text-lg';
                    star.textContent = '‚≠ê';
                    star.style.left = element.style.left;
                    star.style.top = element.style.top;
                    star.style.animation = `star-burst 1.5s ease-out forwards`;
                    star.style.setProperty('--angle', `${i * 45}deg`);
                    
                    document.getElementById('particle-container').appendChild(star);
                    setTimeout(() => star.remove(), 1500);
                }
            }
            
            addNews(message) {
                const newsFeed = document.getElementById('news-feed');
                const newsItem = document.createElement('div');
                newsItem.className = 'notification text-sm p-2 bg-blue-50 rounded border-l-4 border-blue-400';
                
                const time = new Date().toLocaleTimeString('th-TH');
                newsItem.innerHTML = `<span class="text-gray-500">${time}</span> - ${message}`;
                
                newsFeed.insertBefore(newsItem, newsFeed.firstChild);
                
                // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡πÑ‡∏ß‡πâ‡πÅ‡∏Ñ‡πà 15 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                while (newsFeed.children.length > 15) {
                    newsFeed.removeChild(newsFeed.lastChild);
                }
            }
            
            addDiagnosticMessage(message) {
                const output = document.getElementById('diagnostic-output');
                const messageDiv = document.createElement('div');
                messageDiv.textContent = message;
                output.appendChild(messageDiv);
                
                // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î
                output.scrollTop = output.scrollHeight;
                
                // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ß‡πâ‡πÅ‡∏Ñ‡πà 20 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î
                while (output.children.length > 20) {
                    output.removeChild(output.firstChild);
                }
            }
            
            updateAllDisplays() {
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å
                document.getElementById('money').textContent = `${this.gameState.money.toLocaleString()} ‡∏ø`;
                document.getElementById('level').textContent = this.gameState.level;
                document.getElementById('score').textContent = this.gameState.score.toLocaleString();
                document.getElementById('repairs-completed').textContent = this.gameState.repairsCompleted;
                document.getElementById('energy').textContent = `${Math.max(0, this.gameState.energy)}%`;
                document.getElementById('temperature').textContent = `${this.gameState.temperature.toFixed(1)}¬∞C`;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ñ‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå
                const expPercentage = (this.gameState.experience / this.gameState.experienceToNext) * 100;
                document.getElementById('exp-bar').style.width = `${expPercentage}%`;
                document.getElementById('exp-text').textContent = `${this.gameState.experience} / ${this.gameState.experienceToNext} EXP`;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                const discoveredDamages = this.gameState.damages.filter(d => d.discovered);
                const repairedDamages = this.gameState.damages.filter(d => d.repaired);
                
                document.getElementById('damage-count').textContent = discoveredDamages.length;
                document.getElementById('repaired-count').textContent = repairedDamages.length;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
                const qualityPercentage = Math.max(0, this.gameState.qualityScore - (this.gameState.repairsCompleted * 2));
                document.getElementById('quality-score').textContent = `${qualityPercentage}%`;
                document.getElementById('quality-percentage').textContent = `${qualityPercentage}%`;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏Ç‡πá‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
                const needleRotation = (qualityPercentage / 100) * 180 - 90;
                document.getElementById('quality-needle').style.transform = `translate(-50%, -100%) rotate(${needleRotation}deg)`;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏≠‡∏∑‡πà‡∏ô‡πÜ
                document.getElementById('daily-repairs').textContent = this.gameState.dailyRepairs;
                document.getElementById('streak').textContent = this.gameState.streak;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö
                let rank = '‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà';
                if (this.gameState.level >= 10) rank = '‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç';
                else if (this.gameState.level >= 7) rank = '‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô';
                else if (this.gameState.level >= 5) rank = '‡∏ä‡πà‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û';
                else if (this.gameState.level >= 3) rank = '‡∏ä‡πà‡∏≤‡∏á‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î';
                
                document.getElementById('rank').textContent = rank;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏ß‡∏•‡∏≤
                const hours = Math.floor(this.gameState.gameTime);
                const minutes = Math.floor((this.gameState.gameTime - hours) * 60);
                document.getElementById('game-time').textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')} ‡∏ô.`;
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô
                if (this.gameState.energy <= 0) {
                    this.gameState.energy = 0;
                    this.addNews('‚ö†Ô∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏°‡∏î! ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π');
                }
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏¥‡∏ô
                if (this.gameState.money <= 0) {
                    this.addNews('üí∏ ‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏°‡∏î! ‡∏´‡∏≤‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°');
                }
            }
            
            startGameLoop() {
                setInterval(() => {
                    // ‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô
                    if (this.gameState.energy < 100) {
                        this.gameState.energy += 0.5;
                        if (this.gameState.upgrades.superBattery) {
                            this.gameState.energy += 1; // ‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
                        }
                    }
                    
                    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤
                    this.gameState.gameTime += 0.01; // 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÉ‡∏ô‡πÄ‡∏Å‡∏° = 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏à‡∏£‡∏¥‡∏á
                    if (this.gameState.gameTime >= 24) {
                        this.gameState.gameTime = 0;
                        this.gameState.dailyRepairs = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
                        this.gameState.streak++; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
                    }
                    
                    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
                    if (Math.random() < 0.002) { // 0.2% ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ï‡πà‡∏≠‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                        this.generateRandomDamage();
                    }
                    
                    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
                    if (Math.random() < 0.001) { // 0.1% ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ï‡πà‡∏≠‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                        this.updateWeather();
                    }
                    
                    this.updateAllDisplays();
                }, 1000);
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ
                setInterval(() => {
                    this.createRandomParticles();
                }, 2000);
            }
            
            createRandomParticles() {
                const container = document.getElementById('particle-container');
                
                for (let i = 0; i < 3; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle-effect';
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    particle.style.setProperty('--random-x', `${(Math.random() - 0.5) * 200}px`);
                    particle.style.setProperty('--random-y', `${-Math.random() * 150}px`);
                    
                    container.appendChild(particle);
                    setTimeout(() => particle.remove(), 3000);
                }
            }
            
            closeAchievementModal() {
                document.getElementById('achievement-modal').classList.add('hidden');
                document.getElementById('achievement-modal').classList.remove('flex');
            }
            
            closeLevelUpModal() {
                document.getElementById('level-up-modal').classList.add('hidden');
                document.getElementById('level-up-modal').classList.remove('flex');
            }
            
            resetGame() {
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°
                this.gameState = {
                    money: 5000,
                    level: 1,
                    score: 0,
                    experience: 0,
                    experienceToNext: 100,
                    energy: 100,
                    repairsCompleted: 0,
                    dailyRepairs: 0,
                    streak: 0,
                    selectedTool: null,
                    tools: {
                        hammer: { name: '‡∏Ñ‡πâ‡∏≠‡∏ô', icon: 'üî®', efficiency: 1.0, cost: 10 },
                        wrench: { name: '‡∏õ‡∏£‡∏∞‡πÅ‡∏à', icon: 'üîß', efficiency: 1.2, cost: 15 },
                        welder: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°', icon: '‚ö°', efficiency: 1.5, cost: 25 },
                        grinder: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏à‡∏µ‡∏¢‡∏£', icon: '‚öôÔ∏è', efficiency: 1.3, cost: 20 },
                        drill: { name: '‡∏™‡∏ß‡πà‡∏≤‡∏ô', icon: 'ü™ö', efficiency: 1.1, cost: 12 },
                        scanner: { name: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô', icon: 'üì°', efficiency: 2.0, cost: 5 }
                    },
                    damages: [],
                    damageTypes: {
                        crack: { name: '‡∏£‡∏≠‡∏¢‡πÅ‡∏ï‡∏Å', severity: 'minor', tool: 'hammer', reward: 100, icon: 'üí•' },
                        loose: { name: '‡∏ô‡πá‡∏≠‡∏ï‡∏´‡∏•‡∏ß‡∏°', severity: 'minor', tool: 'wrench', reward: 80, icon: 'üî©' },
                        rust: { name: '‡∏™‡∏ô‡∏¥‡∏°', severity: 'major', tool: 'grinder', reward: 150, icon: 'ü¶†' },
                        break: { name: '‡∏´‡∏±‡∏Å', severity: 'critical', tool: 'welder', reward: 300, icon: 'üíî' },
                        hole: { name: '‡∏£‡∏π‡∏£‡∏±‡πà‡∏ß', severity: 'major', tool: 'drill', reward: 200, icon: 'üï≥Ô∏è' },
                        wear: { name: '‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠', severity: 'minor', tool: 'grinder', reward: 120, icon: '‚ö´' }
                    },
                    weather: 'sunny',
                    temperature: 32,
                    gameTime: 8.0,
                    achievements: [],
                    qualityScore: 100,
                    safetyLevel: '‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢',
                    efficiency: 95,
                    upgrades: {
                        electricHammer: false,
                        magnifier: false,
                        superBattery: false
                    }
                };
                
                // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
                document.getElementById('damage-areas').innerHTML = '';
                document.getElementById('news-feed').innerHTML = '';
                document.getElementById('diagnostic-output').innerHTML = '';
                document.getElementById('particle-container').innerHTML = '';
                
                // ‡∏ã‡πà‡∏≠‡∏ô Modal
                document.getElementById('game-over-modal').classList.add('hidden');
                document.getElementById('game-over-modal').classList.remove('flex');
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
                document.querySelectorAll('[data-item]').forEach(button => {
                    button.disabled = false;
                    button.classList.remove('bg-gray-400');
                    button.classList.add('bg-green-600', 'hover:bg-green-700');
                    
                    const price = button.dataset.price;
                    button.textContent = `${price} ‡∏ø`;
                });
                
                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà
                this.initializeGame();
            }
            
            shareScore() {
                const message = `üîß ‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡πÑ‡∏ó‡∏¢\n\n` +
                              `üí∞ ‡πÄ‡∏á‡∏¥‡∏ô: ${this.gameState.money.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n` +
                              `‚≠ê ‡∏£‡∏∞‡∏î‡∏±‡∏ö: ${this.gameState.level}\n` +
                              `üèÜ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${this.gameState.score.toLocaleString()}\n` +
                              `üîß ‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°: ${this.gameState.repairsCompleted} ‡∏à‡∏∏‡∏î\n\n` +
                              `‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞! üöÑ`;
                
                if (navigator.share) {
                    navigator.share({
                        title: '‡πÄ‡∏Å‡∏°‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏≤‡∏á‡∏£‡∏ñ‡πÑ‡∏ü‡πÑ‡∏ó‡∏¢',
                        text: message
                    });
                } else {
                    // Fallback ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
                    navigator.clipboard.writeText(message).then(() => {
                        this.addNews('üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏•‡πâ‡∏ß');
                    });
                }
            }
        }
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
        const game = new RailwayMaintenanceGame();
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case '1': game.selectTool('hammer'); break;
                case '2': game.selectTool('wrench'); break;
                case '3': game.selectTool('welder'); break;
                case '4': game.selectTool('grinder'); break;
                case '5': game.selectTool('drill'); break;
                case '6': game.selectTool('scanner'); break;
                case ' ': e.preventDefault(); game.scanForDamages(); break;
                case 'r': game.autoRepair(); break;
            }
        });
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î
        setTimeout(() => {
            game.addNews('üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏° 1-6 ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠, Space ‡∏™‡πÅ‡∏Å‡∏ô, R ‡∏ã‡πà‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥');
        }, 3000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97954cf2f18bee39',t:'MTc1NjkwMzA2OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
