<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From Startup to Tech Empire - ‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            overflow-x: hidden;
        }
        
        .cyber-glow {
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            border: 1px solid rgba(0, 255, 136, 0.5);
        }
        
        .code-block {
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            border: 2px solid #00ff88;
            border-radius: 12px;
            padding: 15px;
            margin: 8px;
            cursor: grab;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
            user-select: none;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: 500;
        }
        
        .code-block:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px rgba(0, 255, 136, 0.5);
            border-color: #00d4ff;
        }
        
        .code-block:active {
            transform: scale(0.95);
        }
        
        .code-block.used {
            opacity: 0.3;
            cursor: not-allowed;
            transform: scale(0.9);
        }
        
        .drop-zone {
            min-height: 80px;
            border: 3px dashed #00ff88;
            border-radius: 12px;
            background: rgba(0, 255, 136, 0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px 0;
            position: relative;
        }
        
        .drop-zone.filled {
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.2);
        }
        
        .drop-zone.correct {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.3);
            animation: pulse-green 1s ease-in-out;
        }
        
        .drop-zone.incorrect {
            border-color: #ff4757;
            background: rgba(255, 71, 87, 0.3);
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes pulse-green {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
            50% { box-shadow: 0 0 0 20px rgba(0, 255, 136, 0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .server-card {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .server-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.3);
        }
        
        .server-card.active {
            border-color: #e74c3c;
            background: linear-gradient(45deg, #c0392b, #e74c3c);
            box-shadow: 0 0 30px rgba(231, 76, 60, 0.5);
        }
        
        .server-card.working {
            border-color: #f39c12;
            background: linear-gradient(45deg, #d68910, #f39c12);
            animation: working-pulse 2s infinite;
        }
        
        @keyframes working-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #00ff88, #00d4ff);
            height: 10px;
            border-radius: 5px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progress-shine 2s infinite;
        }
        
        @keyframes progress-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .world-map {
            background: radial-gradient(circle at center, #0f0f23 0%, #1a1a2e 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(0, 255, 136, 0.3);
        }
        
        .country-node {
            position: absolute;
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            border: 3px solid #00ff88;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            z-index: 10;
        }
        
        .country-node:hover {
            transform: scale(1.3);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.8);
            z-index: 20;
        }
        
        .country-node.owned {
            background: linear-gradient(45deg, #00ff88, #00d4ff);
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }
        
        .country-node.available {
            animation: available-pulse 3s infinite;
        }
        
        @keyframes available-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
            50% { box-shadow: 0 0 0 15px rgba(0, 255, 136, 0); }
        }
        
        .floating-animation {
            animation: float 4s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        
        .neon-text {
            text-shadow: 0 0 10px #00ff88, 0 0 20px #00ff88, 0 0 30px #00ff88;
        }
        
        .cyber-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: 2px solid #00ff88;
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .cyber-button:hover::before {
            left: 100%;
        }
        
        .cyber-button:hover {
            background: linear-gradient(45deg, #00ff88, #00d4ff);
            box-shadow: 0 0 25px rgba(0, 255, 136, 0.5);
            transform: translateY(-3px);
        }
        
        .cyber-button:active {
            transform: translateY(0);
        }
        
        .cyber-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .stats-panel {
            background: rgba(26, 26, 46, 0.9);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }
        
        .notification.success {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            border: 2px solid #00ff88;
        }
        
        .notification.error {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            border: 2px solid #ff4757;
        }
        
        .notification.info {
            background: linear-gradient(45deg, #3498db, #2980b9);
            border: 2px solid #00d4ff;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .task-card {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            border: 2px solid #f39c12;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        
        .task-card.urgent {
            border-color: #e74c3c;
            animation: urgent-blink 2s infinite;
        }
        
        @keyframes urgent-blink {
            0%, 100% { border-color: #e74c3c; }
            50% { border-color: #ff6b6b; }
        }
        
        .staff-card {
            background: linear-gradient(45deg, #8e44ad, #9b59b6);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .staff-card:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(142, 68, 173, 0.4);
        }
        
        .staff-card.working {
            border-color: #f39c12;
            background: linear-gradient(45d, #d68910, #f39c12);
        }
        
        .staff-card.available {
            border-color: #27ae60;
        }
        
        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, #00ff88, #00d4ff);
            opacity: 0.6;
            animation: data-flow 3s infinite;
        }
        
        @keyframes data-flow {
            0% { opacity: 0.3; }
            50% { opacity: 1; }
            100% { opacity: 0.3; }
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <!-- Game Container -->
    <div id="gameContainer" class="min-h-screen">
        <!-- Start Screen -->
        <div id="startScreen" class="flex items-center justify-center min-h-screen p-4">
            <div class="text-center cyber-glow bg-gray-900 bg-opacity-90 p-12 rounded-2xl max-w-4xl">
                <h1 class="text-6xl font-bold mb-8 neon-text floating-animation">üéÆ From Startup to Tech Empire</h1>
                <p class="text-2xl mb-8 text-gray-300">‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                    <div class="stats-panel p-6 rounded-xl">
                        <div class="text-4xl mb-3">üë®‚Äçüíª</div>
                        <h3 class="text-xl font-semibold mb-2">Phase 1: Coding Factory</h3>
                        <p class="text-gray-400">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏ö‡∏ö Puzzle ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</p>
                    </div>
                    <div class="stats-panel p-6 rounded-xl">
                        <div class="text-4xl mb-3">üßë‚Äçüíº</div>
                        <h3 class="text-xl font-semibold mb-2">Phase 2: IT Management</h3>
                        <p class="text-gray-400">‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤</p>
                    </div>
                    <div class="stats-panel p-6 rounded-xl">
                        <div class="text-4xl mb-3">üåç</div>
                        <h3 class="text-xl font-semibold mb-2">Phase 3: Global Empire</h3>
                        <p class="text-gray-400">‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÑ‡∏õ‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏Å‡∏§‡∏ï</p>
                    </div>
                </div>
                
                <button onclick="startGame()" class="cyber-button text-xl px-8 py-4">üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
            </div>
        </div>

        <!-- Phase 1: Coding Factory -->
        <div id="phase1" class="hidden p-6">
            <div class="max-w-7xl mx-auto">
                <!-- Header -->
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
                    <h2 class="text-4xl font-bold neon-text">üë®‚Äçüíª Phase 1: Coding Factory</h2>
                    <div class="stats-panel p-6 flex flex-wrap gap-6">
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                            <div id="phase1Score" class="text-2xl text-green-400 font-bold">0</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡πÄ‡∏ß‡∏•‡∏≤</div>
                            <div id="phase1Timer" class="text-2xl text-yellow-400 font-bold">90</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏á‡∏≤‡∏ô</div>
                            <div id="phase1Task" class="text-2xl text-blue-400 font-bold">1/3</div>
                        </div>
                    </div>
                </div>

                <!-- Task Description -->
                <div id="taskDescription" class="cyber-glow bg-gray-900 p-8 rounded-xl mb-8">
                    <h3 class="text-2xl font-semibold mb-4">üéØ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
                    <p id="taskText" class="text-lg text-gray-300 mb-4">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à...</p>
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="text-sm text-gray-400 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</div>
                        <div class="bg-gray-700 rounded-full h-4">
                            <div id="taskProgressBar" class="progress-bar h-4 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
                    <!-- Code Blocks Pool -->
                    <div class="xl:col-span-1">
                        <h4 class="text-2xl font-semibold mb-6 flex items-center">
                            üì¶ ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î
                            <span class="ml-3 text-sm bg-blue-600 px-3 py-1 rounded-full">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
                        </h4>
                        <div id="codeBlocksPool" class="space-y-4">
                            <!-- Code blocks will be generated here -->
                        </div>
                    </div>

                    <!-- Assembly Area -->
                    <div class="xl:col-span-2">
                        <h4 class="text-2xl font-semibold mb-6 flex items-center">
                            üîß ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
                            <span class="ml-3 text-sm bg-green-600 px-3 py-1 rounded-full">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö</span>
                        </h4>
                        <div id="assemblyArea" class="space-y-4 mb-8">
                            <!-- Drop zones will be generated here -->
                        </div>
                        <div class="flex flex-wrap gap-4">
                            <button onclick="checkProgram()" class="cyber-button" id="checkBtn">
                                ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
                            </button>
                            <button onclick="resetProgram()" class="cyber-button">
                                üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                            </button>
                            <button onclick="getHint()" class="cyber-button" id="hintBtn">
                                üí° ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ (‡πÄ‡∏´‡∏•‡∏∑‡∏≠ <span id="hintsLeft">2</span>)
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 2: IT Business Management -->
        <div id="phase2" class="hidden p-6">
            <div class="max-w-7xl mx-auto">
                <!-- Header -->
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
                    <h2 class="text-4xl font-bold neon-text">üßë‚Äçüíº Phase 2: IT Business Management</h2>
                    <div class="stats-panel p-6 flex flex-wrap gap-6">
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                            <div id="phase2Score" class="text-2xl text-green-400 font-bold">0</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</div>
                            <div id="budget" class="text-2xl text-yellow-400 font-bold">150,000‡∏ø</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏≠‡πÉ‡∏à</div>
                            <div id="satisfaction" class="text-2xl text-blue-400 font-bold">100%</div>
                        </div>
                    </div>
                </div>

                <!-- Current Tasks -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div>
                        <h4 class="text-2xl font-semibold mb-4">üìã ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h4>
                        <div id="taskQueue" class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Tasks will be generated here -->
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-2xl font-semibold mb-4">‚ö° ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</h4>
                        <div id="systemStatus" class="stats-panel p-6 rounded-xl">
                            <div class="grid grid-cols-2 gap-4 text-center">
                                <div>
                                    <div class="text-3xl mb-2">üñ•Ô∏è</div>
                                    <div class="text-sm text-gray-400">‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div>
                                    <div id="activeServers" class="text-xl font-bold text-green-400">0/4</div>
                                </div>
                                <div>
                                    <div class="text-3xl mb-2">üë•</div>
                                    <div class="text-sm text-gray-400">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div>
                                    <div id="activeStaff" class="text-xl font-bold text-blue-400">0/3</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <!-- Servers -->
                    <div>
                        <div class="flex justify-between items-center mb-6">
                            <h4 class="text-2xl font-semibold">üñ•Ô∏è ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</h4>
                            <button onclick="upgradeServer()" class="cyber-button" id="upgradeBtn">
                                ‚¨ÜÔ∏è ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î (25,000‡∏ø)
                            </button>
                        </div>
                        <div id="serversGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Servers will be generated here -->
                        </div>
                    </div>

                    <!-- Staff -->
                    <div>
                        <div class="flex justify-between items-center mb-6">
                            <h4 class="text-2xl font-semibold">üë• ‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô</h4>
                            <button onclick="hireStaff()" class="cyber-button" id="hireBtn">
                                ‚ûï ‡∏à‡πâ‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (15,000‡∏ø)
                            </button>
                        </div>
                        <div id="staffGrid" class="space-y-4">
                            <!-- Staff will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 3: Global Tech Empire -->
        <div id="phase3" class="hidden p-6">
            <div class="max-w-7xl mx-auto">
                <!-- Header -->
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
                    <h2 class="text-4xl font-bold neon-text">üåç Phase 3: Global Tech Empire</h2>
                    <div class="stats-panel p-6 flex flex-wrap gap-6">
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                            <div id="phase3Score" class="text-2xl text-green-400 font-bold">0</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                            <div id="revenue" class="text-2xl text-yellow-400 font-bold">500,000‡∏ø</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm text-gray-400">‡∏™‡∏≤‡∏Ç‡∏≤</div>
                            <div id="branches" class="text-2xl text-blue-400 font-bold">1/8</div>
                        </div>
                    </div>
                </div>

                <!-- Event Panel -->
                <div id="eventPanel" class="cyber-glow bg-gray-900 p-8 rounded-xl mb-8">
                    <h3 class="text-2xl font-semibold mb-4 flex items-center">
                        ‚ö° ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                        <span class="ml-4 text-sm bg-red-600 px-3 py-1 rounded-full animate-pulse">‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à!</span>
                    </h3>
                    <p id="eventDescription" class="text-lg text-gray-300 mb-6">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</p>
                    <div id="eventChoices" class="flex flex-wrap gap-4">
                        <!-- Event choices will be generated here -->
                    </div>
                </div>

                <!-- World Map -->
                <div class="world-map cyber-glow p-8 h-[500px] relative mb-8">
                    <h4 class="text-2xl font-semibold mb-6 text-center">üó∫Ô∏è ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏•‡∏Å - ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h4>
                    
                    <!-- Connection lines will be drawn here -->
                    <svg class="absolute inset-0 w-full h-full pointer-events-none" id="connectionSvg">
                        <!-- Connection lines between countries -->
                    </svg>
                    
                    <!-- Countries -->
                    <div class="country-node owned" style="top: 35%; left: 65%;" onclick="selectCountry('thailand')" data-country="thailand" title="‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢ (‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏ç‡πà)">üáπüá≠</div>
                    <div class="country-node available" style="top: 20%; left: 15%;" onclick="selectCountry('usa')" data-country="usa" title="‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤ - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 800,000‡∏ø">üá∫üá∏</div>
                    <div class="country-node available" style="top: 30%; left: 45%;" onclick="selectCountry('germany')" data-country="germany" title="‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 600,000‡∏ø">üá©üá™</div>
                    <div class="country-node available" style="top: 25%; left: 55%;" onclick="selectCountry('russia')" data-country="russia" title="‡∏£‡∏±‡∏™‡πÄ‡∏ã‡∏µ‡∏¢ - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 500,000‡∏ø">üá∑üá∫</div>
                    <div class="country-node available" style="top: 40%; left: 50%;" onclick="selectCountry('india')" data-country="india" title="‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡∏µ‡∏¢ - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 400,000‡∏ø">üáÆüá≥</div>
                    <div class="country-node available" style="top: 45%; left: 70%;" onclick="selectCountry('singapore')" data-country="singapore" title="‡∏™‡∏¥‡∏á‡∏Ñ‡πÇ‡∏õ‡∏£‡πå - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 450,000‡∏ø">üá∏üá¨</div>
                    <div class="country-node available" style="top: 15%; left: 75%;" onclick="selectCountry('japan')" data-country="japan" title="‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 700,000‡∏ø">üáØüáµ</div>
                    <div class="country-node available" style="top: 20%; left: 80%;" onclick="selectCountry('korea')" data-country="korea" title="‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ‡πÉ‡∏ï‡πâ - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 550,000‡∏ø">üá∞üá∑</div>
                    <div class="country-node available" style="top: 60%; left: 20%;" onclick="selectCountry('brazil')" data-country="brazil" title="‡∏ö‡∏£‡∏≤‡∏ã‡∏¥‡∏• - ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: 350,000‡∏ø">üáßüá∑</div>
                </div>

                <!-- Company Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="stats-panel p-6 rounded-xl text-center">
                        <div class="text-3xl mb-3">üí∞</div>
                        <div class="text-lg font-semibold">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°</div>
                        <div id="totalRevenue" class="text-2xl text-green-400 font-bold">500,000‡∏ø</div>
                    </div>
                    <div class="stats-panel p-6 rounded-xl text-center">
                        <div class="text-3xl mb-3">üë•</div>
                        <div class="text-lg font-semibold">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                        <div id="totalEmployees" class="text-2xl text-blue-400 font-bold">25 ‡∏Ñ‡∏ô</div>
                    </div>
                    <div class="stats-panel p-6 rounded-xl text-center">
                        <div class="text-3xl mb-3">üèÜ</div>
                        <div class="text-lg font-semibold">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÇ‡∏•‡∏Å</div>
                        <div id="worldRank" class="text-2xl text-purple-400 font-bold">#156</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden flex items-center justify-center min-h-screen p-4">
            <div class="text-center cyber-glow bg-gray-900 bg-opacity-95 p-12 rounded-2xl max-w-5xl">
                <h2 class="text-5xl font-bold mb-8 neon-text">üèÜ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ</h2>
                
                <div id="finalResults" class="space-y-8">
                    <!-- Results will be populated here -->
                </div>
                
                <div class="mt-10 flex flex-wrap justify-center gap-4">
                    <button onclick="restartGame()" class="cyber-button text-lg px-6 py-3">
                        üîÑ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà
                    </button>
                    <button onclick="showStartScreen()" class="cyber-button text-lg px-6 py-3">
                        üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                    <button onclick="shareResults()" class="cyber-button text-lg px-6 py-3">
                        üì§ ‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State Management
        let gameState = {
            currentPhase: 0,
            phase1: { 
                score: 0, 
                timer: 90, 
                currentTask: 1, 
                totalTasks: 3,
                hintsUsed: 0,
                maxHints: 2,
                selectedBlocks: [],
                correctSequence: []
            },
            phase2: { 
                score: 0, 
                budget: 150000, 
                satisfaction: 100, 
                servers: [], 
                staff: [], 
                tasks: [],
                completedTasks: 0,
                failedTasks: 0
            },
            phase3: { 
                score: 0, 
                revenue: 500000, 
                branches: 1, 
                ownedCountries: ['thailand'], 
                events: [],
                totalRevenue: 500000,
                employees: 25,
                worldRank: 156
            },
            totalScore: 0,
            timers: []
        };

        // Phase 1 Configuration
        const phase1Tasks = [
            {
                id: 1,
                title: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ",
                description: "‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå",
                hint: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",
                correctOrder: ["start", "input", "validate", "authenticate", "redirect"],
                blocks: [
                    { id: "start", text: "üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö", color: "bg-green-600", description: "‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô" },
                    { id: "input", text: "üìù ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ", color: "bg-blue-600", description: "‡∏£‡∏±‡∏ö username ‡πÅ‡∏•‡∏∞ password" },
                    { id: "validate", text: "üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö", color: "bg-yellow-600", description: "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" },
                    { id: "authenticate", text: "üîê ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô", color: "bg-purple-600", description: "‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" },
                    { id: "redirect", text: "‚û°Ô∏è ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å", color: "bg-red-600", description: "‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£" }
                ]
            },
            {
                id: 2,
                title: "‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå",
                description: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß",
                hint: "‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡πà‡∏≠‡∏ô ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô",
                correctOrder: ["start", "calculate", "payment", "verify", "confirm"],
                blocks: [
                    { id: "start", text: "üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô", color: "bg-green-600", description: "‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô" },
                    { id: "calculate", text: "üí∞ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°", color: "bg-blue-600", description: "‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏©‡∏µ" },
                    { id: "payment", text: "üí≥ ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞", color: "bg-yellow-600", description: "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£" },
                    { id: "verify", text: "‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞", color: "bg-purple-600", description: "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" },
                    { id: "confirm", text: "üìß ‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à", color: "bg-red-600", description: "‡∏™‡πà‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤" }
                ]
            },
            {
                id: 3,
                title: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                description: "‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö CRM ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                hint: "‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",
                correctOrder: ["start", "collect", "store", "process", "report"],
                blocks: [
                    { id: "start", text: "üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö CRM", color: "bg-green-600", description: "‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤" },
                    { id: "collect", text: "üìä ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", color: "bg-blue-600", description: "‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á" },
                    { id: "store", text: "üíæ ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", color: "bg-yellow-600", description: "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" },
                    { id: "process", text: "‚öôÔ∏è ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", color: "bg-purple-600", description: "‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà" },
                    { id: "report", text: "üìà ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô", color: "bg-red-600", description: "‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á" }
                ]
            }
        ];

        // Phase 2 Configuration
        const serverTypes = [
            { id: 1, name: "Web Server Alpha", capacity: 60, efficiency: 80, status: "idle", progress: 0, cost: 25000 },
            { id: 2, name: "Database Server Beta", capacity: 80, efficiency: 90, status: "idle", progress: 0, cost: 25000 },
            { id: 3, name: "App Server Gamma", capacity: 70, efficiency: 85, status: "idle", progress: 0, cost: 25000 },
            { id: 4, name: "File Server Delta", capacity: 50, efficiency: 75, status: "idle", progress: 0, cost: 25000 }
        ];

        const staffTypes = [
            { id: 1, name: "‡∏ô‡∏≤‡∏¢ ‡∏Å Frontend Dev", skill: "frontend", efficiency: 85, salary: 15000, status: "available", experience: "3 ‡∏õ‡∏µ" },
            { id: 2, name: "‡∏ô‡∏≤‡∏á ‡∏Ç Backend Dev", skill: "backend", efficiency: 90, salary: 15000, status: "available", experience: "5 ‡∏õ‡∏µ" },
            { id: 3, name: "‡∏ô‡∏≤‡∏¢ ‡∏Ñ System Admin", skill: "system", efficiency: 80, salary: 15000, status: "available", experience: "4 ‡∏õ‡∏µ" }
        ];

        const taskTemplates = [
            { name: "‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå E-commerce", difficulty: 3, reward: 35000, time: 45, type: "frontend" },
            { name: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", difficulty: 4, reward: 40000, time: 60, type: "backend" },
            { name: "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå", difficulty: 2, reward: 25000, time: 30, type: "system" },
            { name: "‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢", difficulty: 5, reward: 50000, time: 75, type: "system" },
            { name: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠", difficulty: 4, reward: 45000, time: 90, type: "frontend" },
            { name: "‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", difficulty: 3, reward: 30000, time: 50, type: "backend" }
        ];

        // Phase 3 Configuration
        const countries = {
            usa: { name: "‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤", cost: 800000, monthlyRevenue: 300000, employees: 50, difficulty: 4, flag: "üá∫üá∏" },
            germany: { name: "‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ", cost: 600000, monthlyRevenue: 200000, employees: 35, difficulty: 3, flag: "üá©üá™" },
            japan: { name: "‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô", cost: 700000, monthlyRevenue: 250000, employees: 40, difficulty: 4, flag: "üáØüáµ" },
            singapore: { name: "‡∏™‡∏¥‡∏á‡∏Ñ‡πÇ‡∏õ‡∏£‡πå", cost: 450000, monthlyRevenue: 150000, employees: 25, difficulty: 2, flag: "üá∏üá¨" },
            india: { name: "‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡∏µ‡∏¢", cost: 400000, monthlyRevenue: 180000, employees: 60, difficulty: 3, flag: "üáÆüá≥" },
            korea: { name: "‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ‡πÉ‡∏ï‡πâ", cost: 550000, monthlyRevenue: 190000, employees: 30, difficulty: 3, flag: "üá∞üá∑" },
            russia: { name: "‡∏£‡∏±‡∏™‡πÄ‡∏ã‡∏µ‡∏¢", cost: 500000, monthlyRevenue: 160000, employees: 35, difficulty: 3, flag: "üá∑üá∫" },
            brazil: { name: "‡∏ö‡∏£‡∏≤‡∏ã‡∏¥‡∏•", cost: 350000, monthlyRevenue: 120000, employees: 45, difficulty: 2, flag: "üáßüá∑" }
        };

        const globalEvents = [
            {
                id: 1,
                title: "üö® ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏•‡πà‡∏°‡πÉ‡∏ô‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤",
                description: "‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏Ø ‡∏•‡πà‡∏° ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ 15,000 ‡∏Ñ‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏î‡πà‡∏ß‡∏ô!",
                choices: [
                    { text: "üí∞ ‡∏ã‡πà‡∏≠‡∏°‡∏î‡πà‡∏ß‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (300,000‡∏ø)", effect: { revenue: -300000, score: 50, description: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß" } },
                    { text: "‚ö° ‡πÉ‡∏ä‡πâ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á (100,000‡∏ø)", effect: { revenue: -100000, score: 20, description: "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏à" } },
                    { text: "‚è∞ ‡∏£‡∏≠‡∏ä‡πà‡∏≤‡∏á‡∏ã‡πà‡∏≠‡∏°‡∏õ‡∏Å‡∏ï‡∏¥ (50,000‡∏ø)", effect: { revenue: -50000, score: -30, description: "‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ï‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á" } }
                ]
            },
            {
                id: 2,
                title: "üéØ ‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÉ‡∏´‡∏°‡πà",
                description: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå AI ‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏±‡∏ô‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡∏≤",
                choices: [
                    { text: "üöÄ ‡∏û‡∏±‡∏í‡∏ô‡∏≤ AI ‡πÉ‡∏´‡∏°‡πà (500,000‡∏ø)", effect: { revenue: -500000, score: 80, description: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á" } },
                    { text: "üí∏ ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (200,000‡∏ø)", effect: { revenue: -200000, score: 30, description: "‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô" } },
                    { text: "üì¢ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î (150,000‡∏ø)", effect: { revenue: -150000, score: 40, description: "‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ó‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô" } }
                ]
            },
            {
                id: 3,
                title: "üë• ‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏£‡∏∞‡∏ó‡∏±‡∏ô‡∏´‡∏±‡∏ô",
                description: "‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏´‡∏•‡∏±‡∏Å 5 ‡∏Ñ‡∏ô ‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÉ‡∏´‡∏°‡πà ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏≠‡∏≤‡∏à‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤",
                choices: [
                    { text: "üíé ‡∏à‡πâ‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç (400,000‡∏ø)", effect: { revenue: -400000, score: 60, description: "‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏π‡∏á" } },
                    { text: "üéì ‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà (200,000‡∏ø)", effect: { revenue: -200000, score: 35, description: "‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢" } },
                    { text: "ü§ù ‡∏à‡πâ‡∏≤‡∏á Outsource (250,000‡∏ø)", effect: { revenue: -250000, score: 45, description: "‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏î‡∏µ" } }
                ]
            },
            {
                id: 4,
                title: "üèõÔ∏è ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•",
                description: "‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•‡∏≠‡∏≠‡∏Å‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ PDPA ‡πÉ‡∏´‡∏°‡πà ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 30 ‡∏ß‡∏±‡∏ô",
                choices: [
                    { text: "‚öñÔ∏è ‡∏à‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ (300,000‡∏ø)", effect: { revenue: -300000, score: 70, description: "‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå" } },
                    { text: "üîß ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏≠‡∏á (150,000‡∏ø)", effect: { revenue: -150000, score: 40, description: "‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà" } },
                    { text: "‚è≥ ‡∏£‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå (0‡∏ø)", effect: { revenue: 0, score: -50, description: "‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á" } }
                ]
            }
        ];

        // Utility Functions
        function showNotification(message, type = 'info', duration = 3000) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }

        function updateTimer(elementId, value) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = value;
                if (value <= 10 && value > 0) {
                    element.style.color = '#ff4757';
                    element.style.animation = 'pulse 1s infinite';
                }
            }
        }

        function clearAllTimers() {
            gameState.timers.forEach(timer => clearInterval(timer));
            gameState.timers = [];
        }

        // Game Flow Functions
        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            clearAllTimers();
            resetGameState();
            startPhase1();
        }

        function resetGameState() {
            gameState = {
                currentPhase: 0,
                phase1: { 
                    score: 0, 
                    timer: 90, 
                    currentTask: 1, 
                    totalTasks: 3,
                    hintsUsed: 0,
                    maxHints: 2,
                    selectedBlocks: [],
                    correctSequence: []
                },
                phase2: { 
                    score: 0, 
                    budget: 150000, 
                    satisfaction: 100, 
                    servers: [], 
                    staff: [], 
                    tasks: [],
                    completedTasks: 0,
                    failedTasks: 0
                },
                phase3: { 
                    score: 0, 
                    revenue: 500000, 
                    branches: 1, 
                    ownedCountries: ['thailand'], 
                    events: [],
                    totalRevenue: 500000,
                    employees: 25,
                    worldRank: 156
                },
                totalScore: 0,
                timers: []
            };
        }

        // Phase 1 Functions
        function startPhase1() {
            gameState.currentPhase = 1;
            document.getElementById('phase1').classList.remove('hidden');
            initializePhase1();
            startPhase1Timer();
        }

        function initializePhase1() {
            const task = phase1Tasks[gameState.phase1.currentTask - 1];
            gameState.phase1.correctSequence = task.correctOrder;
            gameState.phase1.selectedBlocks = [];
            
            document.getElementById('taskText').textContent = task.description;
            document.getElementById('hintsLeft').textContent = gameState.phase1.maxHints - gameState.phase1.hintsUsed;
            
            generateCodeBlocks(task.blocks);
            generateDropZones(task.correctOrder.length);
            updatePhase1UI();
        }

        function generateCodeBlocks(blocks) {
            const pool = document.getElementById('codeBlocksPool');
            pool.innerHTML = '';
            
            const shuffled = [...blocks].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(block => {
                const blockEl = document.createElement('div');
                blockEl.className = `code-block ${block.color}`;
                blockEl.dataset.blockId = block.id;
                blockEl.innerHTML = `
                    <div class="text-center">
                        <div class="font-semibold text-lg mb-1">${block.text}</div>
                        <div class="text-xs opacity-75">${block.description}</div>
                    </div>
                `;
                
                blockEl.onclick = () => selectCodeBlock(block.id, blockEl);
                pool.appendChild(blockEl);
            });
        }

        function generateDropZones(count) {
            const area = document.getElementById('assemblyArea');
            area.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const zone = document.createElement('div');
                zone.className = 'drop-zone';
                zone.dataset.position = i;
                zone.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl mb-2">üìç</div>
                        <div class="text-gray-400">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${i + 1}</div>
                        <div class="text-sm text-gray-500">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</div>
                    </div>
                `;
                
                zone.onclick = () => placeBlockInZone(i);
                area.appendChild(zone);
            }
        }

        function selectCodeBlock(blockId, blockElement) {
            // Remove previous selection
            document.querySelectorAll('.code-block').forEach(el => {
                el.style.border = '2px solid #00ff88';
                el.style.transform = 'scale(1)';
            });
            
            // Highlight selected block
            blockElement.style.border = '3px solid #ffd700';
            blockElement.style.transform = 'scale(1.05)';
            
            // Store selected block
            gameState.phase1.selectedBlock = blockId;
            
            showNotification('‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á', 'info', 2000);
        }

        function placeBlockInZone(position) {
            if (!gameState.phase1.selectedBlock) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏Å‡πà‡∏≠‡∏ô', 'error');
                return;
            }
            
            const blockId = gameState.phase1.selectedBlock;
            const blockElement = document.querySelector(`[data-block-id="${blockId}"]`);
            const zone = document.querySelector(`[data-position="${position}"]`);
            
            if (!blockElement || !zone) return;
            
            // Check if position is already filled
            if (gameState.phase1.selectedBlocks[position]) {
                // Return previous block to pool
                const prevBlockId = gameState.phase1.selectedBlocks[position];
                const prevBlockEl = document.querySelector(`[data-block-id="${prevBlockId}"]`);
                if (prevBlockEl) {
                    prevBlockEl.classList.remove('used');
                    prevBlockEl.onclick = () => selectCodeBlock(prevBlockId, prevBlockEl);
                }
            }
            
            // Place new block
            gameState.phase1.selectedBlocks[position] = blockId;
            
            // Update zone display
            const task = phase1Tasks[gameState.phase1.currentTask - 1];
            const block = task.blocks.find(b => b.id === blockId);
            
            zone.innerHTML = `
                <div class="text-center">
                    <div class="font-semibold text-lg mb-1">${block.text}</div>
                    <div class="text-xs opacity-75">${block.description}</div>
                    <button onclick="removeBlockFromZone(${position})" class="mt-2 text-red-400 hover:text-red-300 text-sm">‚ùå ‡∏•‡∏ö</button>
                </div>
            `;
            zone.classList.add('filled');
            
            // Mark block as used
            blockElement.classList.add('used');
            blockElement.onclick = null;
            
            // Clear selection
            gameState.phase1.selectedBlock = null;
            document.querySelectorAll('.code-block').forEach(el => {
                el.style.border = '2px solid #00ff88';
                el.style.transform = 'scale(1)';
            });
            
            // Update progress
            updateTaskProgress();
            
            showNotification('‡∏ß‡∏≤‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success', 1500);
        }

        function removeBlockFromZone(position) {
            const blockId = gameState.phase1.selectedBlocks[position];
            if (!blockId) return;
            
            const blockElement = document.querySelector(`[data-block-id="${blockId}"]`);
            const zone = document.querySelector(`[data-position="${position}"]`);
            
            // Return block to pool
            if (blockElement) {
                blockElement.classList.remove('used');
                blockElement.onclick = () => selectCodeBlock(blockId, blockElement);
            }
            
            // Clear zone
            gameState.phase1.selectedBlocks[position] = null;
            zone.innerHTML = `
                <div class="text-center">
                    <div class="text-2xl mb-2">üìç</div>
                    <div class="text-gray-400">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${position + 1}</div>
                    <div class="text-sm text-gray-500">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</div>
                </div>
            `;
            zone.classList.remove('filled');
            
            updateTaskProgress();
            showNotification('‡∏•‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß', 'info', 1500);
        }

        function updateTaskProgress() {
            const filledSlots = gameState.phase1.selectedBlocks.filter(block => block !== null).length;
            const totalSlots = gameState.phase1.correctSequence.length;
            const progress = (filledSlots / totalSlots) * 100;
            
            document.getElementById('taskProgressBar').style.width = `${progress}%`;
        }

        function checkProgram() {
            const userSequence = gameState.phase1.selectedBlocks.filter(block => block !== null);
            const correctSequence = gameState.phase1.correctSequence;
            
            if (userSequence.length !== correctSequence.length) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ß‡∏≤‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á', 'error');
                return;
            }
            
            let correctCount = 0;
            const zones = document.querySelectorAll('.drop-zone');
            
            // Check each position
            for (let i = 0; i < correctSequence.length; i++) {
                const zone = zones[i];
                if (gameState.phase1.selectedBlocks[i] === correctSequence[i]) {
                    zone.classList.add('correct');
                    correctCount++;
                } else {
                    zone.classList.add('incorrect');
                }
            }
            
            // Calculate score
            const accuracy = (correctCount / correctSequence.length) * 100;
            let taskScore = 0;
            
            if (accuracy === 100) {
                taskScore = 150;
                showNotification('üéâ ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö', 'success');
            } else if (accuracy >= 80) {
                taskScore = 100;
                showNotification('üëç ‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢', 'success');
            } else if (accuracy >= 60) {
                taskScore = 50;
                showNotification('üòê ‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î', 'error');
            } else {
                taskScore = 0;
                showNotification('‚ùå ‡∏ú‡∏¥‡∏î‡∏°‡∏≤‡∏Å! ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
            }
            
            gameState.phase1.score += taskScore;
            updatePhase1UI();
            
            // Disable check button temporarily
            document.getElementById('checkBtn').disabled = true;
            
            setTimeout(() => {
                // Clear visual feedback
                zones.forEach(zone => {
                    zone.classList.remove('correct', 'incorrect');
                });
                
                if (accuracy >= 60) {
                    // Move to next task or phase
                    if (gameState.phase1.currentTask < gameState.phase1.totalTasks) {
                        gameState.phase1.currentTask++;
                        initializePhase1();
                    } else {
                        endPhase1();
                    }
                } else {
                    // Allow retry
                    document.getElementById('checkBtn').disabled = false;
                }
            }, 3000);
        }

        function resetProgram() {
            gameState.phase1.selectedBlocks = [];
            gameState.phase1.selectedBlock = null;
            
            // Reset all blocks
            document.querySelectorAll('.code-block').forEach(block => {
                block.classList.remove('used');
                block.style.border = '2px solid #00ff88';
                block.style.transform = 'scale(1)';
                const blockId = block.dataset.blockId;
                block.onclick = () => selectCodeBlock(blockId, block);
            });
            
            // Reset all zones
            const zones = document.querySelectorAll('.drop-zone');
            zones.forEach((zone, index) => {
                zone.classList.remove('filled', 'correct', 'incorrect');
                zone.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl mb-2">üìç</div>
                        <div class="text-gray-400">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${index + 1}</div>
                        <div class="text-sm text-gray-500">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</div>
                    </div>
                `;
                zone.onclick = () => placeBlockInZone(index);
            });
            
            updateTaskProgress();
            document.getElementById('checkBtn').disabled = false;
            showNotification('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß', 'info');
        }

        function getHint() {
            if (gameState.phase1.hintsUsed >= gameState.phase1.maxHints) {
                showNotification('‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß', 'error');
                return;
            }
            
            const task = phase1Tasks[gameState.phase1.currentTask - 1];
            gameState.phase1.hintsUsed++;
            
            showNotification(`üí° ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ: ${task.hint}`, 'info', 5000);
            
            document.getElementById('hintsLeft').textContent = gameState.phase1.maxHints - gameState.phase1.hintsUsed;
            
            if (gameState.phase1.hintsUsed >= gameState.phase1.maxHints) {
                document.getElementById('hintBtn').disabled = true;
            }
        }

        function startPhase1Timer() {
            const timer = setInterval(() => {
                gameState.phase1.timer--;
                updateTimer('phase1Timer', gameState.phase1.timer);
                
                if (gameState.phase1.timer <= 0) {
                    clearInterval(timer);
                    showNotification('‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ', 'error');
                    setTimeout(() => endPhase1(), 2000);
                }
            }, 1000);
            
            gameState.timers.push(timer);
        }

        function updatePhase1UI() {
            document.getElementById('phase1Score').textContent = gameState.phase1.score;
            document.getElementById('phase1Task').textContent = `${gameState.phase1.currentTask}/${gameState.phase1.totalTasks}`;
        }

        function endPhase1() {
            gameState.totalScore += gameState.phase1.score;
            document.getElementById('phase1').classList.add('hidden');
            
            showNotification(`Phase 1 ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${gameState.phase1.score}`, 'success', 3000);
            setTimeout(() => startPhase2(), 1000);
        }

        // Phase 2 Functions
        function startPhase2() {
            gameState.currentPhase = 2;
            document.getElementById('phase2').classList.remove('hidden');
            initializePhase2();
            startPhase2Simulation();
        }

        function initializePhase2() {
            gameState.phase2.servers = JSON.parse(JSON.stringify(serverTypes));
            gameState.phase2.staff = JSON.parse(JSON.stringify(staffTypes));
            gameState.phase2.tasks = [];
            
            generateServers();
            generateStaff();
            updatePhase2UI();
            
            showNotification('‡πÄ‡∏£‡∏¥‡πà‡∏° Phase 2: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à', 'info', 4000);
        }

        function generateServers() {
            const grid = document.getElementById('serversGrid');
            grid.innerHTML = '';
            
            gameState.phase2.servers.forEach(server => {
                const serverEl = document.createElement('div');
                serverEl.className = `server-card ${server.status}`;
                serverEl.onclick = () => toggleServer(server.id);
                
                const statusText = {
                    'idle': '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô',
                    'working': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô',
                    'active': '‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å'
                };
                
                const statusColor = {
                    'idle': 'text-gray-400',
                    'working': 'text-orange-400',
                    'active': 'text-red-400'
                };
                
                serverEl.innerHTML = `
                    <div class="text-xl font-bold mb-2">${server.name}</div>
                    <div class="grid grid-cols-2 gap-2 text-sm mb-3">
                        <div>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏: <span class="text-blue-400">${server.capacity}%</span></div>
                        <div>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û: <span class="text-green-400">${server.efficiency}%</span></div>
                    </div>
                    <div class="text-sm ${statusColor[server.status]} mb-3">
                        ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${statusText[server.status]}
                    </div>
                    ${server.status === 'working' ? `
                        <div class="mb-2">
                            <div class="text-xs text-gray-400 mb-1">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</div>
                            <div class="bg-gray-700 rounded-full h-2">
                                <div class="progress-bar h-2 rounded-full" style="width: ${server.progress}%"></div>
                            </div>
                        </div>
                    ` : ''}
                    <div class="text-xs text-gray-500">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠${server.status === 'idle' ? '‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô' : '‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô'}</div>
                `;
                
                grid.appendChild(serverEl);
            });
        }

        function generateStaff() {
            const grid = document.getElementById('staffGrid');
            grid.innerHTML = '';
            
            gameState.phase2.staff.forEach(staff => {
                const staffEl = document.createElement('div');
                staffEl.className = `staff-card ${staff.status}`;
                staffEl.onclick = () => toggleStaff(staff.id);
                
                const statusText = {
                    'available': '‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô',
                    'working': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô'
                };
                
                const statusColor = {
                    'available': 'text-green-400',
                    'working': 'text-orange-400'
                };
                
                staffEl.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="font-bold text-lg">${staff.name}</div>
                            <div class="text-sm text-gray-300">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç: ${staff.skill}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-blue-400">‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û ${staff.efficiency}%</div>
                            <div class="text-xs text-gray-400">${staff.experience}</div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="text-sm ${statusColor[staff.status]}">
                            ${statusText[staff.status]}
                        </div>
                        <div class="text-sm text-yellow-400">
                            ${staff.salary.toLocaleString()}‡∏ø/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                        </div>
                    </div>
                `;
                
                grid.appendChild(staffEl);
            });
        }

        function toggleServer(serverId) {
            const server = gameState.phase2.servers.find(s => s.id === serverId);
            if (!server) return;
            
            if (server.status === 'idle') {
                server.status = 'active';
                showNotification(`‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ${server.name}`, 'success');
            } else if (server.status === 'active') {
                server.status = 'idle';
                showNotification(`‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ${server.name}`, 'info');
            } else if (server.status === 'working') {
                showNotification('‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏î‡πâ', 'error');
                return;
            }
            
            generateServers();
            updateSystemStatus();
        }

        function toggleStaff(staffId) {
            const staff = gameState.phase2.staff.find(s => s.id === staffId);
            if (!staff) return;
            
            if (staff.status === 'available') {
                staff.status = 'working';
                showNotification(`${staff.name} ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô`, 'success');
            } else {
                staff.status = 'available';
                showNotification(`${staff.name} ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô`, 'info');
            }
            
            generateStaff();
            updateSystemStatus();
        }

        function hireStaff() {
            if (gameState.phase2.budget < 15000) {
                showNotification('‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡πâ‡∏≤‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô', 'error');
                return;
            }
            
            const newStaffId = gameState.phase2.staff.length + 1;
            const skills = ['frontend', 'backend', 'system'];
            const names = ['‡∏ô‡∏≤‡∏¢ ‡∏á', '‡∏ô‡∏≤‡∏á ‡∏à', '‡∏ô‡∏≤‡∏¢ ‡∏â', '‡∏ô‡∏≤‡∏á ‡∏ä', '‡∏ô‡∏≤‡∏¢ ‡∏ã'];
            const positions = ['Junior Dev', 'Senior Dev', 'Tech Lead', 'System Admin', 'DevOps'];
            
            const newStaff = {
                id: newStaffId,
                name: `${names[Math.floor(Math.random() * names.length)]} ${positions[Math.floor(Math.random() * positions.length)]}`,
                skill: skills[Math.floor(Math.random() * skills.length)],
                efficiency: 60 + Math.floor(Math.random() * 30),
                salary: 15000,
                status: 'available',
                experience: `${1 + Math.floor(Math.random() * 5)} ‡∏õ‡∏µ`
            };
            
            gameState.phase2.staff.push(newStaff);
            gameState.phase2.budget -= 15000;
            
            generateStaff();
            updatePhase2UI();
            showNotification(`‡∏à‡πâ‡∏≤‡∏á ${newStaff.name} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`, 'success');
        }

        function upgradeServer() {
            if (gameState.phase2.budget < 25000) {
                showNotification('‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î', 'error');
                return;
            }
            
            const availableServers = gameState.phase2.servers.filter(s => s.status === 'idle');
            if (availableServers.length === 0) {
                showNotification('‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î', 'error');
                return;
            }
            
            const serverToUpgrade = availableServers[Math.floor(Math.random() * availableServers.length)];
            serverToUpgrade.capacity = Math.min(100, serverToUpgrade.capacity + 15);
            serverToUpgrade.efficiency = Math.min(100, serverToUpgrade.efficiency + 10);
            
            gameState.phase2.budget -= 25000;
            
            generateServers();
            updatePhase2UI();
            showNotification(`‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î ${serverToUpgrade.name} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`, 'success');
        }

        function updateSystemStatus() {
            const activeServers = gameState.phase2.servers.filter(s => s.status === 'active' || s.status === 'working').length;
            const totalServers = gameState.phase2.servers.length;
            const activeStaff = gameState.phase2.staff.filter(s => s.status === 'working').length;
            const totalStaff = gameState.phase2.staff.length;
            
            document.getElementById('activeServers').textContent = `${activeServers}/${totalServers}`;
            document.getElementById('activeStaff').textContent = `${activeStaff}/${totalStaff}`;
        }

        function generateTask() {
            const template = taskTemplates[Math.floor(Math.random() * taskTemplates.length)];
            const task = {
                id: Date.now(),
                name: template.name,
                difficulty: template.difficulty,
                reward: template.reward,
                timeLimit: template.time,
                timeRemaining: template.time,
                type: template.type,
                progress: 0,
                status: 'waiting'
            };
            
            gameState.phase2.tasks.push(task);
            updateTaskQueue();
            
            showNotification(`‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà: ${task.name}`, 'info');
        }

        function updateTaskQueue() {
            const queue = document.getElementById('taskQueue');
            queue.innerHTML = '';
            
            gameState.phase2.tasks.forEach(task => {
                const taskEl = document.createElement('div');
                taskEl.className = `task-card ${task.timeRemaining <= 15 ? 'urgent' : ''}`;
                
                const statusColor = {
                    'waiting': 'text-yellow-400',
                    'in-progress': 'text-blue-400',
                    'completed': 'text-green-400',
                    'failed': 'text-red-400'
                };
                
                const statusText = {
                    'waiting': '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',
                    'in-progress': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',
                    'completed': '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô',
                    'failed': '‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß'
                };
                
                taskEl.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <div class="font-bold text-lg">${task.name}</div>
                            <div class="text-sm text-gray-400">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${task.type} | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å: ${'‚≠ê'.repeat(task.difficulty)}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg text-green-400 font-bold">${task.reward.toLocaleString()}‡∏ø</div>
                            <div class="text-sm text-gray-400">‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-3">
                        <div>
                            <div class="text-sm text-gray-400">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
                            <div class="text-lg ${task.timeRemaining <= 15 ? 'text-red-400' : 'text-yellow-400'} font-bold">
                                ${task.timeRemaining}s
                            </div>
                        </div>
                        <div>
                            <div class="text-sm text-gray-400">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</div>
                            <div class="text-sm ${statusColor[task.status]} font-semibold">
                                ${statusText[task.status]}
                            </div>
                        </div>
                    </div>
                    
                    ${task.status === 'in-progress' ? `
                        <div class="mb-3">
                            <div class="flex justify-between text-sm mb-1">
                                <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
                                <span>${Math.round(task.progress)}%</span>
                            </div>
                            <div class="bg-gray-700 rounded-full h-3">
                                <div class="progress-bar h-3 rounded-full" style="width: ${task.progress}%"></div>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${task.status === 'waiting' ? `
                        <button onclick="startTask(${task.id})" class="cyber-button w-full">
                            üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô
                        </button>
                    ` : ''}
                `;
                
                queue.appendChild(taskEl);
            });
        }

        function startTask(taskId) {
            const task = gameState.phase2.tasks.find(t => t.id === taskId);
            if (!task || task.status !== 'waiting') return;
            
            // Check if we have resources
            const activeServers = gameState.phase2.servers.filter(s => s.status === 'active');
            const workingStaff = gameState.phase2.staff.filter(s => s.status === 'working');
            
            if (activeServers.length === 0) {
                showNotification('‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á', 'error');
                return;
            }
            
            if (workingStaff.length === 0) {
                showNotification('‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏ô', 'error');
                return;
            }
            
            // Start task
            task.status = 'in-progress';
            
            // Set servers to working
            activeServers.forEach(server => {
                server.status = 'working';
                server.progress = 0;
            });
            
            generateServers();
            updateTaskQueue();
            updateSystemStatus();
            
            showNotification(`‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô: ${task.name}`, 'success');
            
            // Start task progress simulation
            const taskTimer = setInterval(() => {
                if (task.status !== 'in-progress') {
                    clearInterval(taskTimer);
                    return;
                }
                
                // Calculate progress rate based on resources
                let progressRate = 0;
                
                // Server contribution
                const workingServers = gameState.phase2.servers.filter(s => s.status === 'working');
                workingServers.forEach(server => {
                    progressRate += (server.efficiency / 100) * 0.8;
                    server.progress = Math.min(100, server.progress + 2);
                });
                
                // Staff contribution
                const currentWorkingStaff = gameState.phase2.staff.filter(s => s.status === 'working');
                currentWorkingStaff.forEach(staff => {
                    let multiplier = 1;
                    if (staff.skill === task.type) multiplier = 1.5; // Skill match bonus
                    progressRate += (staff.efficiency / 100) * multiplier * 1.2;
                });
                
                // Apply difficulty penalty
                progressRate = progressRate / task.difficulty;
                
                task.progress += progressRate;
                task.timeRemaining--;
                
                // Check completion
                if (task.progress >= 100) {
                    // Task completed
                    task.status = 'completed';
                    task.progress = 100;
                    
                    gameState.phase2.score += 100;
                    gameState.phase2.budget += task.reward;
                    gameState.phase2.satisfaction = Math.min(100, gameState.phase2.satisfaction + 10);
                    gameState.phase2.completedTasks++;
                    
                    // Free up servers
                    workingServers.forEach(server => {
                        server.status = 'idle';
                        server.progress = 0;
                    });
                    
                    showNotification(`‚úÖ ‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô: ${task.name} (+${task.reward.toLocaleString()}‡∏ø)`, 'success');
                    
                    generateServers();
                    updateTaskQueue();
                    updatePhase2UI();
                    updateSystemStatus();
                    
                    clearInterval(taskTimer);
                } else if (task.timeRemaining <= 0) {
                    // Task failed
                    task.status = 'failed';
                    
                    gameState.phase2.score = Math.max(0, gameState.phase2.score - 50);
                    gameState.phase2.satisfaction = Math.max(0, gameState.phase2.satisfaction - 20);
                    gameState.phase2.failedTasks++;
                    
                    // Free up servers
                    workingServers.forEach(server => {
                        server.status = 'idle';
                        server.progress = 0;
                    });
                    
                    showNotification(`‚ùå ‡∏á‡∏≤‡∏ô‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ${task.name} (‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏ß‡∏•‡∏≤)`, 'error');
                    
                    generateServers();
                    updateTaskQueue();
                    updatePhase2UI();
                    updateSystemStatus();
                    
                    clearInterval(taskTimer);
                } else {
                    // Continue working
                    generateServers();
                    updateTaskQueue();
                }
            }, 1000);
            
            gameState.timers.push(taskTimer);
        }

        function startPhase2Simulation() {
            // Generate initial tasks
            setTimeout(() => generateTask(), 2000);
            
            // Generate new tasks periodically
            const taskGenerator = setInterval(() => {
                if (gameState.currentPhase !== 2) {
                    clearInterval(taskGenerator);
                    return;
                }
                
                if (gameState.phase2.tasks.filter(t => t.status === 'waiting' || t.status === 'in-progress').length < 3) {
                    generateTask();
                }
            }, 8000);
            
            gameState.timers.push(taskGenerator);
            
            // End phase after certain conditions
            const phaseChecker = setInterval(() => {
                if (gameState.currentPhase !== 2) {
                    clearInterval(phaseChecker);
                    return;
                }
                
                const totalTasks = gameState.phase2.completedTasks + gameState.phase2.failedTasks;
                if (totalTasks >= 8 || gameState.phase2.satisfaction <= 0) {
                    clearInterval(phaseChecker);
                    setTimeout(() => endPhase2(), 2000);
                }
            }, 1000);
            
            gameState.timers.push(phaseChecker);
        }

        function updatePhase2UI() {
            document.getElementById('phase2Score').textContent = gameState.phase2.score;
            document.getElementById('budget').textContent = gameState.phase2.budget.toLocaleString() + '‡∏ø';
            document.getElementById('satisfaction').textContent = gameState.phase2.satisfaction + '%';
            
            // Update button states
            document.getElementById('hireBtn').disabled = gameState.phase2.budget < 15000;
            document.getElementById('upgradeBtn').disabled = gameState.phase2.budget < 25000;
        }

        function endPhase2() {
            gameState.totalScore += gameState.phase2.score;
            document.getElementById('phase2').classList.add('hidden');
            
            const performance = gameState.phase2.completedTasks >= 5 ? '‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°' : 
                               gameState.phase2.completedTasks >= 3 ? '‡∏î‡∏µ' : '‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á';
            
            showNotification(`Phase 2 ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô! ‡∏ú‡∏•‡∏á‡∏≤‡∏ô: ${performance} (${gameState.phase2.completedTasks} ‡∏á‡∏≤‡∏ô)`, 'success', 4000);
            setTimeout(() => startPhase3(), 1000);
        }

        // Phase 3 Functions
        function startPhase3() {
            gameState.currentPhase = 3;
            document.getElementById('phase3').classList.remove('hidden');
            initializePhase3();
            startPhase3Events();
        }

        function initializePhase3() {
            updatePhase3UI();
            generateRandomEvent();
            drawConnections();
            
            showNotification('‡πÄ‡∏£‡∏¥‡πà‡∏° Phase 3: ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÑ‡∏õ‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏Å‡∏§‡∏ï', 'info', 4000);
        }

        function drawConnections() {
            const svg = document.getElementById('connectionSvg');
            svg.innerHTML = '';
            
            // Draw connections between owned countries
            const ownedNodes = gameState.phase3.ownedCountries.map(country => 
                document.querySelector(`[data-country="${country}"]`)
            ).filter(node => node);
            
            for (let i = 0; i < ownedNodes.length - 1; i++) {
                for (let j = i + 1; j < ownedNodes.length; j++) {
                    const node1 = ownedNodes[i];
                    const node2 = ownedNodes[j];
                    
                    const rect1 = node1.getBoundingClientRect();
                    const rect2 = node2.getBoundingClientRect();
                    const svgRect = svg.getBoundingClientRect();
                    
                    const x1 = rect1.left - svgRect.left + rect1.width / 2;
                    const y1 = rect1.top - svgRect.top + rect1.height / 2;
                    const x2 = rect2.left - svgRect.left + rect2.width / 2;
                    const y2 = rect2.top - svgRect.top + rect2.height / 2;
                    
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', x1);
                    line.setAttribute('y1', y1);
                    line.setAttribute('x2', x2);
                    line.setAttribute('y2', y2);
                    line.setAttribute('stroke', '#00ff88');
                    line.setAttribute('stroke-width', '2');
                    line.setAttribute('opacity', '0.6');
                    line.classList.add('connection-line');
                    
                    svg.appendChild(line);
                }
            }
        }

        function selectCountry(countryCode) {
            const country = countries[countryCode];
            if (!country) return;
            
            if (gameState.phase3.ownedCountries.includes(countryCode)) {
                showNotification(`${country.name} ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß`, 'info');
                return;
            }
            
            if (gameState.phase3.revenue < country.cost) {
                showNotification(`‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${country.cost.toLocaleString()}‡∏ø`, 'error');
                return;
            }
            
            // Expand to country
            gameState.phase3.revenue -= country.cost;
            gameState.phase3.ownedCountries.push(countryCode);
            gameState.phase3.branches++;
            gameState.phase3.score += 150;
            gameState.phase3.totalRevenue += country.monthlyRevenue;
            gameState.phase3.employees += country.employees;
            
            // Update world rank
            gameState.phase3.worldRank = Math.max(1, gameState.phase3.worldRank - 20);
            
            // Update country visual
            const countryNode = document.querySelector(`[data-country="${countryCode}"]`);
            if (countryNode) {
                countryNode.classList.remove('available');
                countryNode.classList.add('owned');
            }
            
            drawConnections();
            updatePhase3UI();
            
            showNotification(`üéâ ‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏ô${country.name}‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (+${country.monthlyRevenue.toLocaleString()}‡∏ø/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)`, 'success');
            
            // Check win condition
            if (gameState.phase3.branches >= 6) {
                setTimeout(() => endPhase3(), 3000);
            }
        }

        function generateRandomEvent() {
            const availableEvents = globalEvents.filter(event => 
                !gameState.phase3.events.includes(event.id)
            );
            
            if (availableEvents.length === 0) return;
            
            const event = availableEvents[Math.floor(Math.random() * availableEvents.length)];
            gameState.phase3.events.push(event.id);
            
            document.getElementById('eventDescription').textContent = event.description;
            
            const choicesEl = document.getElementById('eventChoices');
            choicesEl.innerHTML = '';
            
            event.choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.className = 'cyber-button';
                button.textContent = choice.text;
                button.onclick = () => handleEventChoice(choice.effect, event.title);
                choicesEl.appendChild(button);
            });
        }

        function handleEventChoice(effect, eventTitle) {
            gameState.phase3.revenue += effect.revenue || 0;
            gameState.phase3.score += effect.score || 0;
            
            // Ensure revenue doesn't go negative
            gameState.phase3.revenue = Math.max(0, gameState.phase3.revenue);
            
            updatePhase3UI();
            
            showNotification(effect.description, effect.score > 0 ? 'success' : 'error', 4000);
            
            // Generate next event after delay
            setTimeout(() => {
                if (gameState.currentPhase === 3 && gameState.phase3.branches < 6) {
                    generateRandomEvent();
                }
            }, 6000);
        }

        function startPhase3Events() {
            // Monthly revenue update
            const revenueTimer = setInterval(() => {
                if (gameState.currentPhase !== 3) {
                    clearInterval(revenueTimer);
                    return;
                }
                
                gameState.phase3.revenue += gameState.phase3.totalRevenue;
                updatePhase3UI();
                showNotification(`üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô: +${gameState.phase3.totalRevenue.toLocaleString()}‡∏ø`, 'success', 2000);
            }, 15000); // Every 15 seconds = 1 month in game
            
            gameState.timers.push(revenueTimer);
            
            // End phase checker
            const endChecker = setInterval(() => {
                if (gameState.currentPhase !== 3) {
                    clearInterval(endChecker);
                    return;
                }
                
                // End if bankrupt or achieved goal
                if (gameState.phase3.revenue <= 0) {
                    clearInterval(endChecker);
                    showNotification('‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏•‡πâ‡∏°‡∏•‡∏∞‡∏•‡∏≤‡∏¢! ‡πÄ‡∏Å‡∏°‡∏à‡∏ö', 'error');
                    setTimeout(() => endPhase3(), 3000);
                } else if (gameState.phase3.branches >= 6) {
                    clearInterval(endChecker);
                    showNotification('üèÜ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                    setTimeout(() => endPhase3(), 3000);
                }
            }, 1000);
            
            gameState.timers.push(endChecker);
        }

        function updatePhase3UI() {
            document.getElementById('phase3Score').textContent = gameState.phase3.score;
            document.getElementById('revenue').textContent = gameState.phase3.revenue.toLocaleString() + '‡∏ø';
            document.getElementById('branches').textContent = `${gameState.phase3.branches}/8`;
            document.getElementById('totalRevenue').textContent = gameState.phase3.totalRevenue.toLocaleString() + '‡∏ø';
            document.getElementById('totalEmployees').textContent = gameState.phase3.employees + ' ‡∏Ñ‡∏ô';
            document.getElementById('worldRank').textContent = '#' + gameState.phase3.worldRank;
        }

        function endPhase3() {
            gameState.totalScore += gameState.phase3.score;
            clearAllTimers();
            showResults();
        }

        // Results and Utility Functions
        function showResults() {
            document.getElementById('phase3').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            const phase1Score = gameState.phase1.score;
            const phase2Score = gameState.phase2.score;
            const phase3Score = gameState.phase3.score;
            const total = gameState.totalScore;
            
            // Determine career path
            let careerPath = "";
            let careerIcon = "";
            let careerDescription = "";
            
            const scores = [
                { phase: "Developer", score: phase1Score, icon: "üë®‚Äçüíª" },
                { phase: "Manager", score: phase2Score, icon: "üßë‚Äçüíº" },
                { phase: "Entrepreneur", score: phase3Score, icon: "üåç" }
            ];
            
            scores.sort((a, b) => b.score - a.score);
            
            const topPhase = scores[0];
            
            if (topPhase.phase === "Developer") {
                careerPath = "‡∏™‡∏≤‡∏¢ Developer (‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤)";
                careerIcon = "üë®‚Äçüíª";
                careerDescription = "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏î‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏°‡∏≠‡∏£‡πå ‡∏´‡∏£‡∏∑‡∏≠ Technical Lead";
            } else if (topPhase.phase === "Manager") {
                careerPath = "‡∏™‡∏≤‡∏¢ Business/Management (‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£)";
                careerIcon = "üßë‚Äçüíº";
                careerDescription = "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ Product Manager ‡∏´‡∏£‡∏∑‡∏≠ IT Manager";
            } else {
                careerPath = "‡∏™‡∏≤‡∏¢ Strategic/Entrepreneur (‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£)";
                careerIcon = "üåç";
                careerDescription = "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ß‡∏¥‡∏™‡∏±‡∏¢‡∏ó‡∏±‡∏®‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ CEO ‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡∏±‡∏Å‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à";
            }
            
            // Determine overall rating
            let rating = "";
            let ratingColor = "";
            let ratingDescription = "";
            
            if (total >= 600) {
                rating = "üèÜ ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° (90-100%)";
                ratingColor = "text-yellow-400";
                ratingDescription = "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏î‡πâ‡∏≤‡∏ô IT Business ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á";
            } else if (total >= 450) {
                rating = "ü•á ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° (80-89%)";
                ratingColor = "text-green-400";
                ratingDescription = "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÅ‡∏•‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£";
            } else if (total >= 300) {
                rating = "ü•à ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏î‡∏µ (60-79%)";
                ratingColor = "text-blue-400";
                ratingDescription = "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ó‡∏µ‡∏°‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå";
            } else if (total >= 150) {
                rating = "ü•â ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏≠‡πÉ‡∏ä‡πâ (40-59%)";
                ratingColor = "text-orange-400";
                ratingDescription = "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏£‡∏ù‡∏∂‡∏Å‡∏ù‡∏ô‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°";
            } else {
                rating = "üìö ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 40%)";
                ratingColor = "text-red-400";
                ratingDescription = "‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏ß‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ù‡∏∂‡∏Å‡∏ù‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏±‡∏Å‡∏©‡∏∞";
            }
            
            // Additional achievements
            const achievements = [];
            if (phase1Score >= 300) achievements.push("üéØ Master Coder - ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç");
            if (phase2Score >= 300) achievements.push("üëë Team Leader - ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡∏°‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û");
            if (phase3Score >= 300) achievements.push("üåü Global Visionary - ‡∏°‡∏µ‡∏ß‡∏¥‡∏™‡∏±‡∏¢‡∏ó‡∏±‡∏®‡∏ô‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÇ‡∏•‡∏Å");
            if (gameState.phase3.branches >= 6) achievements.push("üè¢ Empire Builder - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
            if (gameState.phase1.hintsUsed === 0) achievements.push("üß† Problem Solver - ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á");
            
            document.getElementById('finalResults').innerHTML = `
                <div class="space-y-8">
                    <div class="text-center">
                        <div class="text-8xl mb-4">${careerIcon}</div>
                        <h3 class="text-3xl font-bold text-green-400 mb-2">${careerPath}</h3>
                        <div class="text-xl ${ratingColor} mb-4">${rating}</div>
                        <p class="text-lg text-gray-300 max-w-2xl mx-auto">${careerDescription}</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="stats-panel p-6 rounded-xl text-center">
                            <div class="text-3xl mb-2">üë®‚Äçüíª</div>
                            <div class="text-lg font-semibold">Phase 1: Coding</div>
                            <div class="text-3xl text-green-400 font-bold">${phase1Score}</div>
                            <div class="text-sm text-gray-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                        </div>
                        <div class="stats-panel p-6 rounded-xl text-center">
                            <div class="text-3xl mb-2">üßë‚Äçüíº</div>
                            <div class="text-lg font-semibold">Phase 2: Management</div>
                            <div class="text-3xl text-blue-400 font-bold">${phase2Score}</div>
                            <div class="text-sm text-gray-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                        </div>
                        <div class="stats-panel p-6 rounded-xl text-center">
                            <div class="text-3xl mb-2">üåç</div>
                            <div class="text-lg font-semibold">Phase 3: Strategy</div>
                            <div class="text-3xl text-purple-400 font-bold">${phase3Score}</div>
                            <div class="text-sm text-gray-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                        </div>
                    </div>
                    
                    <div class="stats-panel p-8 rounded-xl text-center">
                        <div class="text-2xl font-bold mb-4">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
                        <div class="text-6xl ${ratingColor} font-bold mb-4">${total}</div>
                        <p class="text-lg text-gray-300">${ratingDescription}</p>
                    </div>
                    
                    ${achievements.length > 0 ? `
                        <div class="stats-panel p-6 rounded-xl">
                            <h4 class="text-xl font-bold mb-4 text-center">üèÜ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</h4>
                            <div class="space-y-2">
                                ${achievements.map(achievement => `
                                    <div class="text-center p-3 bg-gray-800 rounded-lg">
                                        ${achievement}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="stats-panel p-6 rounded-xl">
                        <h4 class="text-xl font-bold mb-4 text-center">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <div>
                                <div class="text-2xl text-blue-400 font-bold">${gameState.phase2.completedTasks}</div>
                                <div class="text-sm text-gray-400">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à</div>
                            </div>
                            <div>
                                <div class="text-2xl text-green-400 font-bold">${gameState.phase3.branches}</div>
                                <div class="text-sm text-gray-400">‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å</div>
                            </div>
                            <div>
                                <div class="text-2xl text-yellow-400 font-bold">${gameState.phase3.employees}</div>
                                <div class="text-sm text-gray-400">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°</div>
                            </div>
                            <div>
                                <div class="text-2xl text-purple-400 font-bold">#${gameState.phase3.worldRank}</div>
                                <div class="text-sm text-gray-400">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÇ‡∏•‡∏Å</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function restartGame() {
            // Hide results screen
            document.getElementById('resultsScreen').classList.add('hidden');
            
            // Reset all country nodes
            document.querySelectorAll('.country-node').forEach(node => {
                node.classList.remove('owned');
                if (node.dataset.country !== 'thailand') {
                    node.classList.add('available');
                } else {
                    node.classList.add('owned');
                }
            });
            
            // Clear connections
            document.getElementById('connectionSvg').innerHTML = '';
            
            // Start new game
            startGame();
        }

        function showStartScreen() {
            // Hide all screens
            ['resultsScreen', 'phase1', 'phase2', 'phase3'].forEach(screenId => {
                document.getElementById(screenId).classList.add('hidden');
            });
            
            // Show start screen
            document.getElementById('startScreen').classList.remove('hidden');
            
            // Clear timers
            clearAllTimers();
            
            // Reset country nodes
            document.querySelectorAll('.country-node').forEach(node => {
                node.classList.remove('owned');
                if (node.dataset.country !== 'thailand') {
                    node.classList.add('available');
                } else {
                    node.classList.add('owned');
                }
            });
            
            // Clear connections
            document.getElementById('connectionSvg').innerHTML = '';
        }

        function shareResults() {
            const phase1Score = gameState.phase1.score;
            const phase2Score = gameState.phase2.score;
            const phase3Score = gameState.phase3.score;
            const total = gameState.totalScore;
            
            let careerPath = "";
            if (phase1Score >= phase2Score && phase1Score >= phase3Score) {
                careerPath = "Developer";
            } else if (phase2Score >= phase1Score && phase2Score >= phase3Score) {
                careerPath = "Manager";
            } else {
                careerPath = "Entrepreneur";
            }
            
            const shareText = `üéÆ ‡∏ú‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô "From Startup to Tech Empire" ‡πÄ‡∏™‡∏£‡πá‡∏à!\n\n` +
                            `üèÜ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${total} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô\n` +
                            `üë®‚Äçüíª Coding: ${phase1Score}\n` +
                            `üßë‚Äçüíº Management: ${phase2Score}\n` +
                            `üåç Strategy: ${phase3Score}\n\n` +
                            `üìä ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏™‡∏≤‡∏¢ ${careerPath}\n` +
                            `üè¢ ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å: ${gameState.phase3.branches} ‡πÅ‡∏´‡πà‡∏á\n\n` +
                            `‡∏°‡∏≤‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ô‡∏î‡∏π! üöÄ`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'From Startup to Tech Empire - ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô',
                    text: shareText
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡πâ‡∏ß!', 'success');
                }).catch(() => {
                    showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ', 'error');
                });
            }
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Add floating animations with random delays
            document.querySelectorAll('.floating-animation').forEach(el => {
                el.style.animationDelay = Math.random() * 2 + 's';
            });
            
            // Add available pulse to country nodes
            document.querySelectorAll('.country-node.available').forEach(node => {
                node.style.animationDelay = Math.random() * 3 + 's';
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97958c4bb36dd02e',t:'MTc1NjkwNTY2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
